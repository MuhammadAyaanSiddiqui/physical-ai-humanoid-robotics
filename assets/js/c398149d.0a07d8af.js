"use strict";(globalThis.webpackChunkphysical_ai_course=globalThis.webpackChunkphysical_ai_course||[]).push([[4334],{8453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>t});var i=a(6540);const s={},l=i.createContext(s);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},9359:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-3-isaac/ch9-navigation/map-building","title":"Map Building with SLAM","description":"Overview","source":"@site/docs/module-3-isaac/ch9-navigation/map-building.md","sourceDirName":"module-3-isaac/ch9-navigation","slug":"/module-3-isaac/ch9-navigation/map-building","permalink":"/physical-ai-humanoid-robotics/docs/module-3-isaac/ch9-navigation/map-building","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-3-isaac/ch9-navigation/map-building.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"6DOF Pose Estimation","permalink":"/physical-ai-humanoid-robotics/docs/module-3-isaac/ch8-perception/pose-estimation"},"next":{"title":"Path Planning Algorithms","permalink":"/physical-ai-humanoid-robotics/docs/module-3-isaac/ch9-navigation/path-planning"}}');var s=a(4848),l=a(8453);const r={},t="Map Building with SLAM",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Part 1: SLAM Toolbox Setup",id:"part-1-slam-toolbox-setup",level:2},{value:"Installation",id:"installation",level:3},{value:"Launch SLAM Toolbox",id:"launch-slam-toolbox",level:3},{value:"Part 2: Building a Map in Isaac Sim",id:"part-2-building-a-map-in-isaac-sim",level:2},{value:"Step 1: Setup Scene",id:"step-1-setup-scene",level:3},{value:"Step 2: Enable ROS 2 Bridge",id:"step-2-enable-ros-2-bridge",level:3},{value:"Step 3: Drive Robot and Build Map",id:"step-3-drive-robot-and-build-map",level:3},{value:"Part 3: Saving Maps",id:"part-3-saving-maps",level:2},{value:"Save Map Command",id:"save-map-command",level:3},{value:"Part 4: Loading Maps for Localization",id:"part-4-loading-maps-for-localization",level:2},{value:"Map Server",id:"map-server",level:3},{value:"AMCL Localization",id:"amcl-localization",level:3},{value:"Part 5: Map Quality Evaluation",id:"part-5-map-quality-evaluation",level:2},{value:"Metrics",id:"metrics",level:3},{value:"Validation Checklist",id:"validation-checklist",level:3},{value:"Summary",id:"summary",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"map-building-with-slam",children:"Map Building with SLAM"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Map building"})," is the foundation of autonomous navigation. Using SLAM (Simultaneous Localization and Mapping), robots create 2D occupancy grid maps showing free space, obstacles, and unexplored areas. These maps enable path planning and autonomous navigation with Nav2."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"What You'll Learn"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Build 2D occupancy grid maps with SLAM"}),"\n",(0,s.jsx)(n.li,{children:"Save and load maps for navigation"}),"\n",(0,s.jsx)(n.li,{children:"Evaluate map quality and completeness"}),"\n",(0,s.jsx)(n.li,{children:"Optimize mapping strategies for different environments"}),"\n",(0,s.jsx)(n.li,{children:"Export maps for Nav2 autonomous navigation"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Prerequisites"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Completed Chapter 8 (VSLAM lesson)"}),"\n",(0,s.jsx)(n.li,{children:"Understanding of ROS 2 tf frames"}),"\n",(0,s.jsx)(n.li,{children:"Nav2 concepts (covered in this chapter)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Estimated Time"}),": 2-3 hours"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Build 2D occupancy grid maps using SLAM Toolbox"}),"\n",(0,s.jsx)(n.li,{children:"Save maps in standard formats (PGM + YAML)"}),"\n",(0,s.jsx)(n.li,{children:"Load pre-built maps for localization"}),"\n",(0,s.jsx)(n.li,{children:"Evaluate map quality metrics"}),"\n",(0,s.jsx)(n.li,{children:"Handle dynamic environments and map updates"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-1-slam-toolbox-setup",children:"Part 1: SLAM Toolbox Setup"}),"\n",(0,s.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install ros-humble-slam-toolbox\n"})}),"\n",(0,s.jsx)(n.h3,{id:"launch-slam-toolbox",children:"Launch SLAM Toolbox"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch slam_toolbox online_async_launch.py \\\n  use_sim_time:=true \\\n  slam_params_file:=/path/to/slam_params.yaml\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Configuration"})," (",(0,s.jsx)(n.code,{children:"slam_params.yaml"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"slam_toolbox:\n  ros__parameters:\n    # Solver parameters\n    solver_plugin: solver_plugins::CeresSolver\n    ceres_linear_solver: SPARSE_NORMAL_CHOLESKY\n    ceres_preconditioner: SCHUR_JACOBI\n    ceres_trust_strategy: LEVENBERG_MARQUARDT\n\n    # Scan matching\n    use_scan_matching: true\n    use_scan_barycenter: true\n    minimum_travel_distance: 0.2\n    minimum_travel_heading: 0.2\n\n    # Map parameters\n    resolution: 0.05  # 5cm grid cells\n    max_laser_range: 20.0\n\n    # Loop closure\n    do_loop_closing: true\n    loop_match_minimum_chain_size: 10\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-2-building-a-map-in-isaac-sim",children:"Part 2: Building a Map in Isaac Sim"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-setup-scene",children:"Step 1: Setup Scene"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Launch Isaac Sim"}),"\n",(0,s.jsxs)(n.li,{children:["Load warehouse: ",(0,s.jsx)(n.code,{children:"Simple_Warehouse/warehouse.usd"})]}),"\n",(0,s.jsx)(n.li,{children:"Add Carter robot with LiDAR"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-enable-ros-2-bridge",children:"Step 2: Enable ROS 2 Bridge"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Enable LiDAR topic\nimport omni.isaac.ros2_bridge as ros_bridge\nros_bridge.enable_topic('/scan')\nros_bridge.enable_topic('/odom')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-drive-robot-and-build-map",children:"Step 3: Drive Robot and Build Map"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: SLAM Toolbox\nros2 launch slam_toolbox online_async_launch.py use_sim_time:=true\n\n# Terminal 2: Teleop\nros2 run teleop_twist_keyboard teleop_twist_keyboard\n\n# Terminal 3: RViz\nrviz2\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"RViz Setup"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Add ",(0,s.jsx)(n.strong,{children:"Map"})," display \u2192 Topic: ",(0,s.jsx)(n.code,{children:"/map"})]}),"\n",(0,s.jsxs)(n.li,{children:["Add ",(0,s.jsx)(n.strong,{children:"LaserScan"})," \u2192 Topic: ",(0,s.jsx)(n.code,{children:"/scan"})]}),"\n",(0,s.jsxs)(n.li,{children:["Add ",(0,s.jsx)(n.strong,{children:"RobotModel"})," \u2192 Description: Carter URDF"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Drive the robot to explore the environment. Watch the map build in real-time."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-3-saving-maps",children:"Part 3: Saving Maps"}),"\n",(0,s.jsx)(n.h3,{id:"save-map-command",children:"Save Map Command"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run nav2_map_server map_saver_cli -f ~/maps/warehouse_map\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output Files"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"warehouse_map.pgm"})," - Image (grayscale: white=free, black=obstacle, gray=unknown)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"warehouse_map.yaml"})," - Metadata"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"YAML Contents"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"image: warehouse_map.pgm\nresolution: 0.05  # meters/pixel\norigin: [-10.0, -10.0, 0.0]  # Map origin (meters)\nnegate: 0\noccupied_thresh: 0.65\nfree_thresh: 0.25\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-4-loading-maps-for-localization",children:"Part 4: Loading Maps for Localization"}),"\n",(0,s.jsx)(n.h3,{id:"map-server",children:"Map Server"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run nav2_map_server map_server --ros-args -p yaml_filename:=~/maps/warehouse_map.yaml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"amcl-localization",children:"AMCL Localization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch nav2_bringup localization_launch.py \\\n  map:=~/maps/warehouse_map.yaml \\\n  use_sim_time:=true\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"part-5-map-quality-evaluation",children:"Part 5: Map Quality Evaluation"}),"\n",(0,s.jsx)(n.h3,{id:"metrics",children:"Metrics"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Metric"}),(0,s.jsx)(n.th,{children:"Good Value"}),(0,s.jsx)(n.th,{children:"Poor Value"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Coverage"})}),(0,s.jsx)(n.td,{children:">95% explored"}),(0,s.jsx)(n.td,{children:"<80% explored"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Alignment"})}),(0,s.jsx)(n.td,{children:"Straight walls"}),(0,s.jsx)(n.td,{children:"Wavy/duplicated walls"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Loop Closure"})}),(0,s.jsx)(n.td,{children:"Consistent when revisiting areas"}),(0,s.jsx)(n.td,{children:"Large jumps/discontinuities"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"validation-checklist",children:"Validation Checklist"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All rooms/areas explored"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Walls are straight and aligned"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No ghost obstacles (artifacts)"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Doorways clearly marked"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Loop closures detected (check SLAM logs)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"\u2705 Built 2D occupancy grid maps with SLAM Toolbox\n\u2705 Saved maps in PGM + YAML format\n\u2705 Loaded maps for localization with AMCL\n\u2705 Evaluated map quality metrics"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Next"}),": Path planning algorithms for autonomous navigation."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SLAM Toolbox"}),": ",(0,s.jsx)(n.a,{href:"https://github.com/SteveMacenski/slam_toolbox",children:"https://github.com/SteveMacenski/slam_toolbox"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Nav2 Map Server"}),": ",(0,s.jsx)(n.a,{href:"https://navigation.ros.org/configuration/packages/configuring-map-server.html",children:"https://navigation.ros.org/configuration/packages/configuring-map-server.html"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);