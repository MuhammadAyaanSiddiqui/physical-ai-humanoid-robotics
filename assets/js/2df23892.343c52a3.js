"use strict";(globalThis.webpackChunkphysical_ai_course=globalThis.webpackChunkphysical_ai_course||[]).push([[5845],{7317:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"module-1-ros2/ch4-packages/workspace-setup","title":"ROS 2 Workspace Setup with Colcon","description":"Module: The Robotic Nervous System","source":"@site/docs/module-1-ros2/ch4-packages/workspace-setup.md","sourceDirName":"module-1-ros2/ch4-packages","slug":"/module-1-ros2/ch4-packages/workspace-setup","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/workspace-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/ch4-packages/workspace-setup.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Joint State Publishing and Control","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch3-urdf/joint-controllers"},"next":{"title":"ROS 2 Launch Files","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/launch-files"}}');var c=s(4848),i=s(8453);const r={},d="ROS 2 Workspace Setup with Colcon",a={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"What is a ROS 2 Workspace?",id:"what-is-a-ros-2-workspace",level:2},{value:"Key Concepts",id:"key-concepts",level:3},{value:"Workspace Structure",id:"workspace-structure",level:2},{value:"Creating a Workspace",id:"creating-a-workspace",level:2},{value:"Step 1: Create Workspace Directory",id:"step-1-create-workspace-directory",level:3},{value:"Step 2: Source ROS 2 (Underlay)",id:"step-2-source-ros-2-underlay",level:3},{value:"Step 3: Build Empty Workspace",id:"step-3-build-empty-workspace",level:3},{value:"Step 4: Source the Overlay",id:"step-4-source-the-overlay",level:3},{value:"Understanding Colcon",id:"understanding-colcon",level:2},{value:"Why Colcon?",id:"why-colcon",level:3},{value:"Basic Colcon Commands",id:"basic-colcon-commands",level:3},{value:"Creating Your First Package",id:"creating-your-first-package",level:2},{value:"Python Package",id:"python-package",level:3},{value:"C++ Package",id:"c-package",level:3},{value:"Package Dependencies",id:"package-dependencies",level:2},{value:"package.xml",id:"packagexml",level:3},{value:"Dependency Types",id:"dependency-types",level:3},{value:"Installing Dependencies",id:"installing-dependencies",level:3},{value:"Sourcing Workspaces",id:"sourcing-workspaces",level:2},{value:"The Overlay System",id:"the-overlay-system",level:3},{value:"Sourcing Order Matters!",id:"sourcing-order-matters",level:3},{value:"Multiple Workspaces",id:"multiple-workspaces",level:3},{value:"Automatic Sourcing (Recommended)",id:"automatic-sourcing-recommended",level:3},{value:"Colcon Build Options",id:"colcon-build-options",level:2},{value:"Symlink Install (Recommended for Python)",id:"symlink-install-recommended-for-python",level:3},{value:"Parallel Builds",id:"parallel-builds",level:3},{value:"Event Handlers (Better Output)",id:"event-handlers-better-output",level:3},{value:"Package Selection",id:"package-selection",level:3},{value:"CMake Arguments (C++ packages)",id:"cmake-arguments-c-packages",level:3},{value:"Common Workflows",id:"common-workflows",level:2},{value:"Daily Development Workflow",id:"daily-development-workflow",level:3},{value:"Testing Workflow",id:"testing-workflow",level:3},{value:"Clean Build Workflow",id:"clean-build-workflow",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Workspace Organization",id:"1-workspace-organization",level:3},{value:"2. Git and Version Control",id:"2-git-and-version-control",level:3},{value:"3. Package Naming Conventions",id:"3-package-naming-conventions",level:3},{value:"4. Dependency Management",id:"4-dependency-management",level:3},{value:"5. Build Speed Optimization",id:"5-build-speed-optimization",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue 1: &quot;Package not found&quot;",id:"issue-1-package-not-found",level:3},{value:"Issue 2: Build Fails with Dependency Errors",id:"issue-2-build-fails-with-dependency-errors",level:3},{value:"Issue 3: Changes Not Reflected",id:"issue-3-changes-not-reflected",level:3},{value:"Issue 4: Multiple Nodes with Same Name",id:"issue-4-multiple-nodes-with-same-name",level:3},{value:"Issue 5: setup.bash Not Found",id:"issue-5-setupbash-not-found",level:3},{value:"Advanced Topics",id:"advanced-topics",level:2},{value:"Mixed Python/C++ Packages",id:"mixed-pythonc-packages",level:3},{value:"Custom Messages in Workspace",id:"custom-messages-in-workspace",level:3},{value:"Useful Colcon Commands Summary",id:"useful-colcon-commands-summary",level:2},{value:"Practice Exercises",id:"practice-exercises",level:2},{value:"Exercise 1: Create Multi-Package Workspace",id:"exercise-1-create-multi-package-workspace",level:3},{value:"Exercise 2: Troubleshoot Broken Workspace",id:"exercise-2-troubleshoot-broken-workspace",level:3},{value:"Exercise 3: Optimize Build Performance",id:"exercise-3-optimize-build-performance",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Further Reading",id:"further-reading",level:2}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"ros-2-workspace-setup-with-colcon",children:"ROS 2 Workspace Setup with Colcon"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Module"}),": The Robotic Nervous System\n",(0,c.jsx)(n.strong,{children:"Chapter"}),": Package Development\n",(0,c.jsx)(n.strong,{children:"Estimated Time"}),": 2-3 hours\n",(0,c.jsx)(n.strong,{children:"Difficulty"}),": Beginner to Intermediate"]}),"\n",(0,c.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"ROS 2 Humble installed and sourced"}),"\n",(0,c.jsx)(n.li,{children:"Basic understanding of ROS 2 nodes and topics"}),"\n",(0,c.jsx)(n.li,{children:"Familiarity with terminal/command line"}),"\n",(0,c.jsx)(n.li,{children:"Python or C++ programming knowledge"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,c.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Understand ROS 2 workspace structure and overlay concept"}),"\n",(0,c.jsx)(n.li,{children:"Create and organize a colcon workspace"}),"\n",(0,c.jsx)(n.li,{children:"Build packages using colcon"}),"\n",(0,c.jsx)(n.li,{children:"Source overlay workspaces correctly"}),"\n",(0,c.jsx)(n.li,{children:"Manage dependencies with package.xml"}),"\n",(0,c.jsx)(n.li,{children:"Use colcon commands effectively"}),"\n",(0,c.jsx)(n.li,{children:"Debug common workspace issues"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"what-is-a-ros-2-workspace",children:"What is a ROS 2 Workspace?"}),"\n",(0,c.jsxs)(n.p,{children:["A ",(0,c.jsx)(n.strong,{children:"ROS 2 workspace"})," is a directory structure where you develop, build, and organize ROS 2 packages."]}),"\n",(0,c.jsx)(n.h3,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"1. Overlay vs Underlay"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Underlay"}),": The base ROS 2 installation (",(0,c.jsx)(n.code,{children:"/opt/ros/humble"}),")"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Overlay"}),": Your workspace built on top of the underlay"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"2. Source Space"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Contains package source code"}),"\n",(0,c.jsxs)(n.li,{children:["Typically in ",(0,c.jsx)(n.code,{children:"src/"})," directory"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"3. Build Space"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Contains build artifacts"}),"\n",(0,c.jsxs)(n.li,{children:["Created by colcon in ",(0,c.jsx)(n.code,{children:"build/"})," directory"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"4. Install Space"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Contains installed executables and libraries"}),"\n",(0,c.jsxs)(n.li,{children:["Created by colcon in ",(0,c.jsx)(n.code,{children:"install/"})," directory"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"5. Log Space"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Contains build logs"}),"\n",(0,c.jsxs)(n.li,{children:["Created in ",(0,c.jsx)(n.code,{children:"log/"})," directory"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"workspace-structure",children:"Workspace Structure"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"my_robot_ws/\n\u251c\u2500\u2500 src/                    # Source space (your packages)\n\u2502   \u251c\u2500\u2500 package_1/\n\u2502   \u2502   \u251c\u2500\u2500 package.xml\n\u2502   \u2502   \u251c\u2500\u2500 setup.py\n\u2502   \u2502   \u2514\u2500\u2500 package_1/\n\u2502   \u2502       \u2514\u2500\u2500 node.py\n\u2502   \u2514\u2500\u2500 package_2/\n\u2502       \u251c\u2500\u2500 package.xml\n\u2502       \u251c\u2500\u2500 CMakeLists.txt\n\u2502       \u2514\u2500\u2500 src/\n\u2502           \u2514\u2500\u2500 node.cpp\n\u251c\u2500\u2500 build/                  # Build space (auto-generated)\n\u2502   \u251c\u2500\u2500 package_1/\n\u2502   \u2514\u2500\u2500 package_2/\n\u251c\u2500\u2500 install/                # Install space (auto-generated)\n\u2502   \u251c\u2500\u2500 setup.bash\n\u2502   \u251c\u2500\u2500 package_1/\n\u2502   \u2514\u2500\u2500 package_2/\n\u2514\u2500\u2500 log/                    # Log space (auto-generated)\n    \u2514\u2500\u2500 build_*/\n"})}),"\n",(0,c.jsx)(n.h2,{id:"creating-a-workspace",children:"Creating a Workspace"}),"\n",(0,c.jsx)(n.h3,{id:"step-1-create-workspace-directory",children:"Step 1: Create Workspace Directory"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Create workspace root\nmkdir -p ~/robot_ws/src\n\n# Navigate to workspace\ncd ~/robot_ws\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Explanation"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"~/robot_ws"})," is the workspace root"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"src/"})," will contain your packages"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"build/"}),", ",(0,c.jsx)(n.code,{children:"install/"}),", ",(0,c.jsx)(n.code,{children:"log/"})," will be auto-created by colcon"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"step-2-source-ros-2-underlay",children:"Step 2: Source ROS 2 (Underlay)"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Important"}),": Always source the underlay before building!"]}),"\n",(0,c.jsx)(n.h3,{id:"step-3-build-empty-workspace",children:"Step 3: Build Empty Workspace"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\ncolcon build\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Starting >>> [no packages]\nFinished <<< [0 packages built, 0 packages skipped]\n\nSummary: 0 packages finished [0.15s]\n"})}),"\n",(0,c.jsx)(n.p,{children:"Even with no packages, this creates the workspace structure."}),"\n",(0,c.jsx)(n.h3,{id:"step-4-source-the-overlay",children:"Step 4: Source the Overlay"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"source ~/robot_ws/install/setup.bash\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Now your workspace is active!"})}),"\n",(0,c.jsx)(n.h2,{id:"understanding-colcon",children:"Understanding Colcon"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Colcon"})," (collective construction) is the ROS 2 build tool that replaced ",(0,c.jsx)(n.code,{children:"catkin"})," from ROS 1."]}),"\n",(0,c.jsx)(n.h3,{id:"why-colcon",children:"Why Colcon?"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Language-agnostic"}),": Builds Python, C++, and mixed packages"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Parallel builds"}),": Builds multiple packages simultaneously"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Isolated builds"}),": Each package builds independently"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Flexible"}),": Supports various build systems (ament_cmake, ament_python, cmake, setuptools)"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"basic-colcon-commands",children:"Basic Colcon Commands"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Build all packages\ncolcon build\n\n# Build specific package\ncolcon build --packages-select my_package\n\n# Build with output to console\ncolcon build --symlink-install --event-handlers console_direct+\n\n# Clean build (rebuild from scratch)\nrm -rf build/ install/ log/\ncolcon build\n\n# Build up to a specific package\ncolcon build --packages-up-to my_package\n\n# Build and run tests\ncolcon test\n\n# Show test results\ncolcon test-result --all\n"})}),"\n",(0,c.jsx)(n.h2,{id:"creating-your-first-package",children:"Creating Your First Package"}),"\n",(0,c.jsx)(n.h3,{id:"python-package",children:"Python Package"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 1"}),": Navigate to src directory:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws/src\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 2"}),": Create package:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_python_pkg \\\n  --dependencies rclpy std_msgs\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Generated Structure"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"my_python_pkg/\n\u251c\u2500\u2500 package.xml\n\u251c\u2500\u2500 setup.py\n\u251c\u2500\u2500 setup.cfg\n\u251c\u2500\u2500 resource/\n\u2502   \u2514\u2500\u2500 my_python_pkg\n\u2514\u2500\u2500 my_python_pkg/\n    \u2514\u2500\u2500 __init__.py\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 3"}),": Add a node:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd my_python_pkg/my_python_pkg\ncat > my_node.py << 'EOF'\n#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__('my_node')\n        self.publisher = self.create_publisher(String, 'my_topic', 10)\n        self.timer = self.create_timer(1.0, self.timer_callback)\n        self.get_logger().info('My node started!')\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello from my_python_pkg!'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Publishing: {msg.data}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\nEOF\n\nchmod +x my_node.py\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 4"}),": Edit ",(0,c.jsx)(n.code,{children:"setup.py"})," to add entry point:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'my_python_pkg'\n\nsetup(\n    name=package_name,\n    version='0.0.1',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='you@example.com',\n    description='My first ROS 2 package',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'my_node = my_python_pkg.my_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 5"}),": Build and source:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\ncolcon build --packages-select my_python_pkg\nsource install/setup.bash\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 6"}),": Run the node:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"ros2 run my_python_pkg my_node\n"})}),"\n",(0,c.jsx)(n.h3,{id:"c-package",children:"C++ Package"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 1"}),": Create package:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws/src\nros2 pkg create --build-type ament_cmake my_cpp_pkg \\\n  --dependencies rclcpp std_msgs\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Generated Structure"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"my_cpp_pkg/\n\u251c\u2500\u2500 package.xml\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 include/\n\u2502   \u2514\u2500\u2500 my_cpp_pkg/\n\u2514\u2500\u2500 src/\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 2"}),": Add a node:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'cd my_cpp_pkg/src\ncat > my_node.cpp << \'EOF\'\n#include <chrono>\n#include <memory>\n#include "rclcpp/rclcpp.hpp"\n#include "std_msgs/msg/string.hpp"\n\nusing namespace std::chrono_literals;\n\nclass MyNode : public rclcpp::Node {\npublic:\n    MyNode() : Node("my_node") {\n        publisher_ = this->create_publisher<std_msgs::msg::String>("my_topic", 10);\n        timer_ = this->create_wall_timer(\n            1s, std::bind(&MyNode::timer_callback, this));\n        RCLCPP_INFO(this->get_logger(), "My node started!");\n    }\n\nprivate:\n    void timer_callback() {\n        auto message = std_msgs::msg::String();\n        message.data = "Hello from my_cpp_pkg!";\n        publisher_->publish(message);\n        RCLCPP_INFO(this->get_logger(), "Publishing: \'%s\'", message.data.c_str());\n    }\n\n    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;\n    rclcpp::TimerBase::SharedPtr timer_;\n};\n\nint main(int argc, char * argv[]) {\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MyNode>());\n    rclcpp::shutdown();\n    return 0;\n}\nEOF\n'})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 3"}),": Edit ",(0,c.jsx)(n.code,{children:"CMakeLists.txt"})," to add executable:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cmake",children:'cmake_minimum_required(VERSION 3.8)\nproject(my_cpp_pkg)\n\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")\n  add_compile_options(-Wall -Wextra -Wpedantic)\nendif()\n\n# Find dependencies\nfind_package(ament_cmake REQUIRED)\nfind_package(rclcpp REQUIRED)\nfind_package(std_msgs REQUIRED)\n\n# Add executable\nadd_executable(my_node src/my_node.cpp)\nament_target_dependencies(my_node rclcpp std_msgs)\n\n# Install executables\ninstall(TARGETS\n  my_node\n  DESTINATION lib/${PROJECT_NAME})\n\nament_package()\n'})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 4"}),": Build and run:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\ncolcon build --packages-select my_cpp_pkg\nsource install/setup.bash\nros2 run my_cpp_pkg my_node\n"})}),"\n",(0,c.jsx)(n.h2,{id:"package-dependencies",children:"Package Dependencies"}),"\n",(0,c.jsx)(n.h3,{id:"packagexml",children:"package.xml"}),"\n",(0,c.jsxs)(n.p,{children:["Every ROS 2 package has a ",(0,c.jsx)(n.code,{children:"package.xml"})," file defining metadata and dependencies."]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_pkg</name>\n  <version>0.0.1</version>\n  <description>My robot control package</description>\n  <maintainer email="you@example.com">Your Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  \x3c!-- Build tool dependency --\x3e\n  <buildtool_depend>ament_python</buildtool_depend>\n\n  \x3c!-- Runtime dependencies --\x3e\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>geometry_msgs</depend>\n\n  \x3c!-- Build-only dependencies (C++ only) --\x3e\n  <build_depend>rosidl_default_generators</build_depend>\n\n  \x3c!-- Execution-only dependencies --\x3e\n  <exec_depend>ros2launch</exec_depend>\n\n  \x3c!-- Test dependencies --\x3e\n  <test_depend>ament_pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,c.jsx)(n.h3,{id:"dependency-types",children:"Dependency Types"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Tag"}),(0,c.jsx)(n.th,{children:"Purpose"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"<buildtool_depend>"})}),(0,c.jsx)(n.td,{children:"Build system (ament_cmake, ament_python)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"<depend>"})}),(0,c.jsx)(n.td,{children:"Both build and runtime dependency"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"<build_depend>"})}),(0,c.jsx)(n.td,{children:"Only needed during build"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"<exec_depend>"})}),(0,c.jsx)(n.td,{children:"Only needed at runtime"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"<test_depend>"})}),(0,c.jsx)(n.td,{children:"Only needed for tests"})]})]})]}),"\n",(0,c.jsx)(n.h3,{id:"installing-dependencies",children:"Installing Dependencies"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Check for missing dependencies"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\nrosdep install --from-paths src --ignore-src -r -y\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"What this does"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"--from-paths src"}),": Check all packages in src/"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"--ignore-src"}),": Don't try to install packages you're developing"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"-r"}),": Continue even if some dependencies fail"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"-y"}),": Auto-approve installation"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"sourcing-workspaces",children:"Sourcing Workspaces"}),"\n",(0,c.jsx)(n.h3,{id:"the-overlay-system",children:"The Overlay System"}),"\n",(0,c.jsxs)(n.p,{children:["ROS 2 uses ",(0,c.jsx)(n.strong,{children:"workspace overlays"})," stacked on top of each other:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Your Workspace Overlay    \u2502  ~/robot_ws/install/setup.bash\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   Base ROS 2 Underlay       \u2502  /opt/ros/humble/setup.bash\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,c.jsx)(n.h3,{id:"sourcing-order-matters",children:"Sourcing Order Matters!"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Correct Order"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# 1. Source underlay first\nsource /opt/ros/humble/setup.bash\n\n# 2. Build your workspace\ncd ~/robot_ws\ncolcon build\n\n# 3. Source your overlay\nsource ~/robot_ws/install/setup.bash\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Wrong Order"})," (will fail):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# DON'T DO THIS!\nsource ~/robot_ws/install/setup.bash  # Overlay first - ERROR!\nsource /opt/ros/humble/setup.bash     # Underlay second - too late\n"})}),"\n",(0,c.jsx)(n.h3,{id:"multiple-workspaces",children:"Multiple Workspaces"}),"\n",(0,c.jsx)(n.p,{children:"You can stack multiple overlays:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Base ROS 2\nsource /opt/ros/humble/setup.bash\n\n# Common packages workspace\nsource ~/common_ws/install/setup.bash\n\n# Your specific project\nsource ~/my_project_ws/install/setup.bash\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Package priority"}),": Later sourced workspaces override earlier ones."]}),"\n",(0,c.jsx)(n.h3,{id:"automatic-sourcing-recommended",children:"Automatic Sourcing (Recommended)"}),"\n",(0,c.jsxs)(n.p,{children:["Add to ",(0,c.jsx)(n.code,{children:"~/.bashrc"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# ROS 2 setup\nsource /opt/ros/humble/setup.bash\n\n# Your workspace (if it exists)\nif [ -f ~/robot_ws/install/setup.bash ]; then\n  source ~/robot_ws/install/setup.bash\nfi\n\n# Helpful aliases\nalias robot_ws='cd ~/robot_ws'\nalias build_ws='cd ~/robot_ws && colcon build && source install/setup.bash'\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Reload"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"source ~/.bashrc\n"})}),"\n",(0,c.jsx)(n.h2,{id:"colcon-build-options",children:"Colcon Build Options"}),"\n",(0,c.jsx)(n.h3,{id:"symlink-install-recommended-for-python",children:"Symlink Install (Recommended for Python)"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"colcon build --symlink-install\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Python file changes don't require rebuild"}),"\n",(0,c.jsx)(n.li,{children:"Faster iteration during development"}),"\n",(0,c.jsx)(n.li,{children:"No need to re-source after Python edits"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"How it works"}),": Creates symbolic links instead of copying files."]}),"\n",(0,c.jsx)(n.h3,{id:"parallel-builds",children:"Parallel Builds"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Use 4 parallel jobs\ncolcon build --parallel-workers 4\n\n# Use all CPU cores\ncolcon build --parallel-workers $(nproc)\n"})}),"\n",(0,c.jsx)(n.h3,{id:"event-handlers-better-output",children:"Event Handlers (Better Output)"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Show all output during build\ncolcon build --event-handlers console_direct+\n\n# Colorized output with status\ncolcon build --event-handlers console_cohesion+\n"})}),"\n",(0,c.jsx)(n.h3,{id:"package-selection",children:"Package Selection"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Build single package\ncolcon build --packages-select my_pkg\n\n# Build multiple packages\ncolcon build --packages-select pkg1 pkg2 pkg3\n\n# Build package and dependencies\ncolcon build --packages-up-to my_pkg\n\n# Skip specific packages\ncolcon build --packages-skip unwanted_pkg\n"})}),"\n",(0,c.jsx)(n.h3,{id:"cmake-arguments-c-packages",children:"CMake Arguments (C++ packages)"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Debug build\ncolcon build --cmake-args -DCMAKE_BUILD_TYPE=Debug\n\n# Release build (optimized)\ncolcon build --cmake-args -DCMAKE_BUILD_TYPE=Release\n\n# With tests\ncolcon build --cmake-args -DBUILD_TESTING=ON\n"})}),"\n",(0,c.jsx)(n.h2,{id:"common-workflows",children:"Common Workflows"}),"\n",(0,c.jsx)(n.h3,{id:"daily-development-workflow",children:"Daily Development Workflow"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"1. Morning setup"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\nsource /opt/ros/humble/setup.bash\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"2. Make changes to Python code"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Edit files in src/my_pkg/my_pkg/\nnano src/my_pkg/my_pkg/my_node.py\n\n# No rebuild needed if using --symlink-install!\nros2 run my_pkg my_node\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"3. Make changes to C++ code"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Edit files in src/my_cpp_pkg/src/\nnano src/my_cpp_pkg/src/my_node.cpp\n\n# Rebuild required\ncolcon build --packages-select my_cpp_pkg\nsource install/setup.bash\nros2 run my_cpp_pkg my_node\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"4. Add new dependencies"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Edit package.xml to add dependency\nnano src/my_pkg/package.xml\n\n# Install new dependencies\nrosdep install --from-paths src --ignore-src -r -y\n\n# Rebuild\ncolcon build --packages-select my_pkg\n"})}),"\n",(0,c.jsx)(n.h3,{id:"testing-workflow",children:"Testing Workflow"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Build with tests\ncolcon build --cmake-args -DBUILD_TESTING=ON\n\n# Run tests for all packages\ncolcon test\n\n# Run tests for specific package\ncolcon test --packages-select my_pkg\n\n# Show test results\ncolcon test-result --all\n\n# Verbose test output\ncolcon test-result --verbose\n"})}),"\n",(0,c.jsx)(n.h3,{id:"clean-build-workflow",children:"Clean Build Workflow"}),"\n",(0,c.jsx)(n.p,{children:"When things go wrong:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\n\n# Option 1: Clean specific package\nrm -rf build/my_pkg install/my_pkg\ncolcon build --packages-select my_pkg\n\n# Option 2: Clean everything and rebuild\nrm -rf build/ install/ log/\ncolcon build\n\n# Option 3: Nuclear option (including source changes)\nrm -rf build/ install/ log/\ngit clean -fdx src/  # WARNING: Removes all untracked files!\ncolcon build\n"})}),"\n",(0,c.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,c.jsx)(n.h3,{id:"1-workspace-organization",children:"1. Workspace Organization"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Good Structure"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"~/ros2_workspaces/\n\u251c\u2500\u2500 common_ws/          # Shared libraries\n\u2502   \u2514\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 my_utils/\n\u2502       \u2514\u2500\u2500 my_msgs/\n\u2514\u2500\u2500 robot_ws/           # Robot-specific code\n    \u2514\u2500\u2500 src/\n        \u251c\u2500\u2500 robot_control/\n        \u2514\u2500\u2500 robot_vision/\n"})}),"\n",(0,c.jsx)(n.h3,{id:"2-git-and-version-control",children:"2. Git and Version Control"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsxs)(n.strong,{children:["Add to ",(0,c.jsx)(n.code,{children:".gitignore"})]}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\ncat > .gitignore << 'EOF'\nbuild/\ninstall/\nlog/\n*.pyc\n__pycache__/\n.vscode/\nEOF\n\n# Initialize git (only for src/)\ngit init\ngit add src/ .gitignore\ngit commit -m \"Initial commit\"\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsxs)(n.strong,{children:["Only version control ",(0,c.jsx)(n.code,{children:"src/"}),"!"]})," Never commit ",(0,c.jsx)(n.code,{children:"build/"}),", ",(0,c.jsx)(n.code,{children:"install/"}),", or ",(0,c.jsx)(n.code,{children:"log/"}),"."]}),"\n",(0,c.jsx)(n.h3,{id:"3-package-naming-conventions",children:"3. Package Naming Conventions"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Use lowercase with underscores: ",(0,c.jsx)(n.code,{children:"my_robot_pkg"})]}),"\n",(0,c.jsxs)(n.li,{children:["Be descriptive: ",(0,c.jsx)(n.code,{children:"humanoid_control"})," not ",(0,c.jsx)(n.code,{children:"ctrl"})]}),"\n",(0,c.jsxs)(n.li,{children:["Prefix related packages: ",(0,c.jsx)(n.code,{children:"myrobot_control"}),", ",(0,c.jsx)(n.code,{children:"myrobot_vision"})]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"4-dependency-management",children:"4. Dependency Management"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Declare ALL dependencies in ",(0,c.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,c.jsxs)(n.li,{children:["Use ",(0,c.jsx)(n.code,{children:"rosdep"})," to install system dependencies"]}),"\n",(0,c.jsx)(n.li,{children:"Keep dependencies minimal (don't depend on what you don't use)"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"5-build-speed-optimization",children:"5. Build Speed Optimization"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Use symlink install for Python packages\ncolcon build --symlink-install\n\n# Use ccache for C++ (install: sudo apt install ccache)\ncolcon build --cmake-args -DCMAKE_CXX_COMPILER_LAUNCHER=ccache\n\n# Limit parallel jobs if low on RAM\ncolcon build --parallel-workers 2\n"})}),"\n",(0,c.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,c.jsx)(n.h3,{id:"issue-1-package-not-found",children:'Issue 1: "Package not found"'}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Symptoms"}),": ",(0,c.jsx)(n.code,{children:"ros2 run my_pkg my_node"})," fails"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Checklist"}),":"]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Built the package?"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_pkg\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"Sourced the workspace?"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"source ~/robot_ws/install/setup.bash\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Entry point added?"})," (Python packages)"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Check ",(0,c.jsx)(n.code,{children:"setup.py"})," has the node in ",(0,c.jsx)(n.code,{children:"entry_points"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Installed executable?"})," (C++ packages)"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Check ",(0,c.jsx)(n.code,{children:"CMakeLists.txt"})," has ",(0,c.jsx)(n.code,{children:"install(TARGETS ...)"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"issue-2-build-fails-with-dependency-errors",children:"Issue 2: Build Fails with Dependency Errors"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Symptoms"}),": ",(0,c.jsx)(n.code,{children:"CMake Error: Could not find package X"})]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Fix"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Install missing dependencies\nrosdep update\nrosdep install --from-paths src --ignore-src -r -y\n\n# Rebuild\ncolcon build\n"})}),"\n",(0,c.jsx)(n.h3,{id:"issue-3-changes-not-reflected",children:"Issue 3: Changes Not Reflected"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Symptoms"}),": Code changes don't appear when running node"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Python"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Did you use ",(0,c.jsx)(n.code,{children:"--symlink-install"}),"? If not, rebuild:","\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"colcon build --symlink-install --packages-select my_pkg\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"C++"}),":"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["C++ always requires rebuild:","\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_pkg\nsource install/setup.bash\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"issue-4-multiple-nodes-with-same-name",children:"Issue 4: Multiple Nodes with Same Name"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Symptoms"}),': "Node name already exists" warning']}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Cause"}),": Sourced multiple overlays with conflicting packages"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Fix"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Start fresh terminal\n# Source workspaces in correct order\nsource /opt/ros/humble/setup.bash\nsource ~/robot_ws/install/setup.bash  # Only once!\n"})}),"\n",(0,c.jsx)(n.h3,{id:"issue-5-setupbash-not-found",children:"Issue 5: setup.bash Not Found"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Symptoms"}),": ",(0,c.jsx)(n.code,{children:"source install/setup.bash"})," fails"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Cause"}),": Haven't built the workspace yet"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Fix"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\ncolcon build\n# Now it exists:\nsource install/setup.bash\n"})}),"\n",(0,c.jsx)(n.h2,{id:"advanced-topics",children:"Advanced Topics"}),"\n",(0,c.jsx)(n.h3,{id:"mixed-pythonc-packages",children:"Mixed Python/C++ Packages"}),"\n",(0,c.jsx)(n.p,{children:"You can have both in one package:"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"package.xml"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:"<buildtool_depend>ament_cmake</buildtool_depend>\n<buildtool_depend>ament_cmake_python</buildtool_depend>\n<depend>rclcpp</depend>\n<depend>rclpy</depend>\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"CMakeLists.txt"})," (add Python support):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cmake",children:"find_package(ament_cmake_python REQUIRED)\n\n# C++ executables\nadd_executable(cpp_node src/cpp_node.cpp)\n\n# Python modules\nament_python_install_package(${PROJECT_NAME})\n"})}),"\n",(0,c.jsx)(n.h3,{id:"custom-messages-in-workspace",children:"Custom Messages in Workspace"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 1"}),": Create message package:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_cmake my_msgs\ncd my_msgs\nmkdir msg\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 2"}),": Define message (",(0,c.jsx)(n.code,{children:"msg/CustomMsg.msg"}),"):"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"string name\nint32 value\nfloat64 timestamp\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 3"}),": Edit ",(0,c.jsx)(n.code,{children:"package.xml"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:"<build_depend>rosidl_default_generators</build_depend>\n<exec_depend>rosidl_default_runtime</exec_depend>\n<member_of_group>rosidl_interface_packages</member_of_group>\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 4"}),": Edit ",(0,c.jsx)(n.code,{children:"CMakeLists.txt"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-cmake",children:'find_package(rosidl_default_generators REQUIRED)\n\nrosidl_generate_interfaces(${PROJECT_NAME}\n  "msg/CustomMsg.msg"\n)\n'})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 5"}),": Build:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd ~/robot_ws\ncolcon build --packages-select my_msgs\nsource install/setup.bash\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Step 6"}),": Use in other packages:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-xml",children:"\x3c!-- In dependent package's package.xml --\x3e\n<depend>my_msgs</depend>\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:"# In Python code\nfrom my_msgs.msg import CustomMsg\n"})}),"\n",(0,c.jsx)(n.h2,{id:"useful-colcon-commands-summary",children:"Useful Colcon Commands Summary"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Build\ncolcon build                                    # Build all\ncolcon build --symlink-install                  # Symlink install\ncolcon build --packages-select pkg              # Build one package\ncolcon build --packages-up-to pkg               # Build with dependencies\n\n# Test\ncolcon test                                     # Run tests\ncolcon test-result --all                        # Show results\ncolcon test-result --verbose                    # Detailed results\n\n# Info\ncolcon list                                     # List packages\ncolcon list --packages-up-to pkg                # Show dependencies\ncolcon graph                                    # Show dependency graph\n\n# Clean\ncolcon clean workspace                          # Remove build/install/log\ncolcon clean packages --packages-select pkg     # Clean one package\n"})}),"\n",(0,c.jsx)(n.h2,{id:"practice-exercises",children:"Practice Exercises"}),"\n",(0,c.jsx)(n.h3,{id:"exercise-1-create-multi-package-workspace",children:"Exercise 1: Create Multi-Package Workspace"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Create workspace with 3 packages:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"my_msgs"}),": Custom messages"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"sensor_node"}),": Publisher using custom messages"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"processor_node"}),": Subscriber processing messages"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Set up dependencies correctly"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Build and test the system"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"exercise-2-troubleshoot-broken-workspace",children:"Exercise 2: Troubleshoot Broken Workspace"}),"\n",(0,c.jsx)(n.p,{children:"Given a workspace with missing dependencies:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"Identify missing dependencies using build errors"}),"\n",(0,c.jsxs)(n.li,{children:["Add them to ",(0,c.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,c.jsxs)(n.li,{children:["Use ",(0,c.jsx)(n.code,{children:"rosdep"})," to install"]}),"\n",(0,c.jsx)(n.li,{children:"Successfully build"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"exercise-3-optimize-build-performance",children:"Exercise 3: Optimize Build Performance"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"Measure baseline build time"}),"\n",(0,c.jsxs)(n.li,{children:["Apply ",(0,c.jsx)(n.code,{children:"--symlink-install"})]}),"\n",(0,c.jsxs)(n.li,{children:["Use ",(0,c.jsx)(n.code,{children:"ccache"})," (C++ packages)"]}),"\n",(0,c.jsxs)(n.li,{children:["Adjust ",(0,c.jsx)(n.code,{children:"--parallel-workers"})]}),"\n",(0,c.jsx)(n.li,{children:"Compare results"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Workspace structure"}),": src/ (your code), build/ (artifacts), install/ (output), log/ (logs)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Overlay system"}),": Your workspace overlays the base ROS 2 installation"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Colcon"})," is the build tool; use ",(0,c.jsx)(n.code,{children:"colcon build"})," to compile packages"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Source order matters"}),": Underlay first, then overlay"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Symlink install"})," speeds up Python development (no rebuild needed)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"package.xml"})," declares dependencies; use ",(0,c.jsx)(n.code,{children:"rosdep"})," to install them"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Git best practice"}),": Only version control ",(0,c.jsx)(n.code,{children:"src/"}),", ignore ",(0,c.jsx)(n.code,{children:"build/install/log/"})]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,c.jsx)(n.p,{children:"Now that you can create and manage workspaces:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Next Lesson"}),": ",(0,c.jsx)(n.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/launch-files",children:"Launch Files"})," - Automate multi-node startup"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Related"}),": ",(0,c.jsx)(n.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/debugging",children:"Debugging"})," - Troubleshoot ROS 2 issues"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://colcon.readthedocs.io/",children:"Colcon Documentation"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html",children:"ROS 2 Package Creation Tutorial"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/Rosdep.html",children:"rosdep Tutorial"})}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Checkpoint"}),": You can now create, build, and manage ROS 2 workspaces!"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var l=s(6540);const c={},i=l.createContext(c);function r(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);