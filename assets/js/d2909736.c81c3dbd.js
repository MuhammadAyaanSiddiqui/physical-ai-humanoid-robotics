"use strict";(globalThis.webpackChunkphysical_ai_course=globalThis.webpackChunkphysical_ai_course||[]).push([[4693],{2193:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"module-1-ros2/ch4-packages/debugging","title":"Debugging ROS 2 Systems","description":"Module: The Robotic Nervous System","source":"@site/docs/module-1-ros2/ch4-packages/debugging.md","sourceDirName":"module-1-ros2/ch4-packages","slug":"/module-1-ros2/ch4-packages/debugging","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/debugging","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/ch4-packages/debugging.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Launch Files","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/launch-files"},"next":{"title":"Module 1 Assessment: Build a Robot Control System","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/assessment"}}');var i=s(4848),l=s(8453);const c={},o="Debugging ROS 2 Systems",d={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Common ROS 2 Errors",id:"common-ros-2-errors",level:2},{value:"1. Package Not Found",id:"1-package-not-found",level:3},{value:"2. Executable Not Found",id:"2-executable-not-found",level:3},{value:"3. Import Errors (Python)",id:"3-import-errors-python",level:3},{value:"4. No Transform Available",id:"4-no-transform-available",level:3},{value:"5. Topic Not Found",id:"5-topic-not-found",level:3},{value:"6. Parameter Not Declared",id:"6-parameter-not-declared",level:3},{value:"7. Message Type Mismatch",id:"7-message-type-mismatch",level:3},{value:"Using ros2 doctor",id:"using-ros2-doctor",level:2},{value:"Basic Check",id:"basic-check",level:3},{value:"Detailed Report",id:"detailed-report",level:3},{value:"Checking Specific Components",id:"checking-specific-components",level:3},{value:"Log Analysis",id:"log-analysis",level:2},{value:"Finding Logs",id:"finding-logs",level:3},{value:"Reading Logs",id:"reading-logs",level:3},{value:"Log Levels",id:"log-levels",level:3},{value:"Setting Log Levels",id:"setting-log-levels",level:3},{value:"Logging in Code",id:"logging-in-code",level:3},{value:"Debugging Tools",id:"debugging-tools",level:2},{value:"1. rqt_console",id:"1-rqt_console",level:3},{value:"2. rqt_graph",id:"2-rqt_graph",level:3},{value:"3. rqt_topic",id:"3-rqt_topic",level:3},{value:"4. rqt_tf_tree",id:"4-rqt_tf_tree",level:3},{value:"5. ros2 topic echo",id:"5-ros2-topic-echo",level:3},{value:"6. ros2 topic hz",id:"6-ros2-topic-hz",level:3},{value:"7. ros2 topic info",id:"7-ros2-topic-info",level:3},{value:"8. ros2 node info",id:"8-ros2-node-info",level:3},{value:"Build Errors",id:"build-errors",level:2},{value:"Python Build Errors",id:"python-build-errors",level:3},{value:"C++ Build Errors",id:"c-build-errors",level:3},{value:"Dependency Errors",id:"dependency-errors",level:3},{value:"Runtime Debugging Workflows",id:"runtime-debugging-workflows",level:2},{value:"Workflow 1: Node Not Communicating",id:"workflow-1-node-not-communicating",level:3},{value:"Workflow 2: Slow or Frozen Node",id:"workflow-2-slow-or-frozen-node",level:3},{value:"Workflow 3: Memory Leak",id:"workflow-3-memory-leak",level:3},{value:"Workflow 4: Launch File Issues",id:"workflow-4-launch-file-issues",level:3},{value:"Debugging Strategies",id:"debugging-strategies",level:2},{value:"1. Divide and Conquer",id:"1-divide-and-conquer",level:3},{value:"2. Print Debugging",id:"2-print-debugging",level:3},{value:"3. Binary Search",id:"3-binary-search",level:3},{value:"4. Minimal Reproducible Example",id:"4-minimal-reproducible-example",level:3},{value:"5. Check Assumptions",id:"5-check-assumptions",level:3},{value:"Common Mistakes to Avoid",id:"common-mistakes-to-avoid",level:2},{value:"1. Not Sourcing Workspace",id:"1-not-sourcing-workspace",level:3},{value:"2. Hardcoded Paths",id:"2-hardcoded-paths",level:3},{value:"3. Ignoring Warnings",id:"3-ignoring-warnings",level:3},{value:"4. Not Checking Return Values",id:"4-not-checking-return-values",level:3},{value:"5. Blocking in Callbacks",id:"5-blocking-in-callbacks",level:3},{value:"Debugging Checklist",id:"debugging-checklist",level:2},{value:"Practice Exercises",id:"practice-exercises",level:2},{value:"Exercise 1: Debug Communication Issue",id:"exercise-1-debug-communication-issue",level:3},{value:"Exercise 2: Debug Build Error",id:"exercise-2-debug-build-error",level:3},{value:"Exercise 3: Performance Debug",id:"exercise-3-performance-debug",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Further Reading",id:"further-reading",level:2}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"debugging-ros-2-systems",children:"Debugging ROS 2 Systems"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Module"}),": The Robotic Nervous System\n",(0,i.jsx)(n.strong,{children:"Chapter"}),": Package Development\n",(0,i.jsx)(n.strong,{children:"Estimated Time"}),": 2-3 hours\n",(0,i.jsx)(n.strong,{children:"Difficulty"}),": Intermediate"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Understanding of ROS 2 nodes, topics, and packages"}),"\n",(0,i.jsx)(n.li,{children:"Experience with launch files"}),"\n",(0,i.jsx)(n.li,{children:"Basic command line proficiency"}),"\n",(0,i.jsx)(n.li,{children:"Familiarity with Python or C++ debugging"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Identify and fix common ROS 2 errors"}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"ros2 doctor"})," to diagnose system issues"]}),"\n",(0,i.jsx)(n.li,{children:"Analyze ROS 2 logs effectively"}),"\n",(0,i.jsx)(n.li,{children:"Debug node communication problems"}),"\n",(0,i.jsx)(n.li,{children:"Troubleshoot build and runtime errors"}),"\n",(0,i.jsx)(n.li,{children:"Use debugging tools (rqt, command line)"}),"\n",(0,i.jsx)(n.li,{children:"Apply systematic debugging workflows"}),"\n",(0,i.jsx)(n.li,{children:"Prevent common mistakes"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-ros-2-errors",children:"Common ROS 2 Errors"}),"\n",(0,i.jsx)(n.h3,{id:"1-package-not-found",children:"1. Package Not Found"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Package 'my_pkg' not found\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Causes & Fixes"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause 1"}),": Package not built"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Fix: Build the package\ncd ~/robot_ws\ncolcon build --packages-select my_pkg\nsource install/setup.bash\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause 2"}),": Workspace not sourced"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Fix: Source workspace\nsource ~/robot_ws/install/setup.bash\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause 3"}),": Wrong terminal"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Fix: Make sure you\'re in the right terminal with sourced workspace\n# Add to ~/.bashrc for automatic sourcing:\necho "source ~/robot_ws/install/setup.bash" >> ~/.bashrc\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verification"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 pkg list | grep my_pkg\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-executable-not-found",children:"2. Executable Not Found"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Executable 'my_node' not found in package 'my_pkg'\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Python Package Fixes"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check 1"}),": Entry point in ",(0,i.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'my_node = my_pkg.my_node:main',  # Must match!\n    ],\n},\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check 2"}),": File is executable"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod +x src/my_pkg/my_pkg/my_node.py\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check 3"}),": Rebuild and source"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_pkg --symlink-install\nsource install/setup.bash\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"C++ Package Fixes"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check 1"}),": Executable added in ",(0,i.jsx)(n.code,{children:"CMakeLists.txt"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:"add_executable(my_node src/my_node.cpp)\nament_target_dependencies(my_node rclcpp)\n\ninstall(TARGETS\n  my_node\n  DESTINATION lib/${PROJECT_NAME})\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check 2"}),": Rebuild"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_pkg\nsource install/setup.bash\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-import-errors-python",children:"3. Import Errors (Python)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ModuleNotFoundError: No module named 'my_pkg'\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix 1"}),": Check ",(0,i.jsx)(n.code,{children:"__init__.py"})," exists"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ls src/my_pkg/my_pkg/__init__.py\n# If missing:\ntouch src/my_pkg/my_pkg/__init__.py\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix 2"}),": Rebuild with symlink install"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_pkg --symlink-install\nsource install/setup.bash\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix 3"}),": Check package structure"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"my_pkg/\n\u251c\u2500\u2500 package.xml\n\u251c\u2500\u2500 setup.py\n\u2514\u2500\u2500 my_pkg/              # Package name must match!\n    \u251c\u2500\u2500 __init__.py      # Required!\n    \u2514\u2500\u2500 my_node.py\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-no-transform-available",children:"4. No Transform Available"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Lookup would require extrapolation into the future.\nCould not transform from 'base_link' to 'camera_link'\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause"}),": TF frames not being published"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Diagnosis"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check TF tree\nros2 run tf2_tools view_frames\n\n# Monitor specific transform\nros2 run tf2_ros tf2_echo base_link camera_link\n\n# List available frames\nros2 topic echo /tf_static\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fixes"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix 1"}),": Start robot_state_publisher"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'ros2 run robot_state_publisher robot_state_publisher \\\n  --ros-args -p robot_description:="$(cat robot.urdf)"\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix 2"}),": Publish joint states"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run joint_state_publisher joint_state_publisher\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix 3"}),": Check URDF links are connected"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'check_urdf robot.urdf\n# Look for "link [X] is not connected to any other link"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"5-topic-not-found",children:"5. Topic Not Found"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Could not find topic '/my_topic'\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Diagnosis"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# List all topics\nros2 topic list\n\n# Check if node is running\nros2 node list\n\n# Check node's topics\nros2 node info /my_node\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common Causes"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause 1"}),": Node not started"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Fix: Start the node\nros2 run my_pkg my_node\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause 2"}),": Topic name mismatch"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Publisher uses: /robot/cmd_vel\n# Subscriber uses: /cmd_vel\n# Fix: Use remapping\nros2 run my_pkg subscriber --ros-args -r cmd_vel:=robot/cmd_vel\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cause 3"}),": Namespace mismatch"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Node in namespace 'robot1' publishes to '/robot1/cmd_vel'\n# Check namespaces:\nros2 node list\n"})}),"\n",(0,i.jsx)(n.h3,{id:"6-parameter-not-declared",children:"6. Parameter Not Declared"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Parameter 'my_param' has not been declared\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix"}),": Declare parameter before using"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Wrong:\nself.get_parameter('my_param')  # Not declared!\n\n# Correct:\nself.declare_parameter('my_param', 'default_value')\nparam = self.get_parameter('my_param').value\n"})}),"\n",(0,i.jsx)(n.h3,{id:"7-message-type-mismatch",children:"7. Message Type Mismatch"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Incompatible type for message: expected std_msgs/msg/String but got geometry_msgs/msg/Twist\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Diagnosis"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check topic type\nros2 topic info /my_topic\n\n# Check message definition\nros2 interface show std_msgs/msg/String\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix"}),": Use correct message type in code"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Wrong:\nfrom std_msgs.msg import String\nself.pub = self.create_publisher(String, '/cmd_vel', 10)\n\n# Correct:\nfrom geometry_msgs.msg import Twist\nself.pub = self.create_publisher(Twist, '/cmd_vel', 10)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"using-ros2-doctor",children:"Using ros2 doctor"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ros2 doctor"})," checks your ROS 2 setup for common issues."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-check",children:"Basic Check"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 doctor\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example Output"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Checking ROS 2 installation...\n\u2713 ROS 2 Humble is installed\n\u2713 ROS_DOMAIN_ID is set to 0\n\u2713 ROS_LOCALHOST_ONLY is not set\n\u2717 Multiple RMW implementations found (fastrtps, cyclonedds)\n\u2713 Network connectivity OK\n\nChecking running nodes...\n\u2713 3 nodes running\n\u2717 Node '/my_node' not responding to echo\n\nWarnings: 2\nErrors: 0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"detailed-report",children:"Detailed Report"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 doctor --report\n"})}),"\n",(0,i.jsx)(n.p,{children:"Generates comprehensive system information:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ROS 2 version and distribution"}),"\n",(0,i.jsx)(n.li,{children:"RMW implementation"}),"\n",(0,i.jsx)(n.li,{children:"Network configuration"}),"\n",(0,i.jsx)(n.li,{children:"Running nodes and topics"}),"\n",(0,i.jsx)(n.li,{children:"Package list"}),"\n",(0,i.jsx)(n.li,{children:"Environment variables"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Save report to file"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 doctor --report > ros2_diagnostics.txt\n"})}),"\n",(0,i.jsx)(n.h3,{id:"checking-specific-components",children:"Checking Specific Components"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check network setup\nros2 doctor --check-network\n\n# Include platform info\nros2 doctor --include-platform\n"})}),"\n",(0,i.jsx)(n.h2,{id:"log-analysis",children:"Log Analysis"}),"\n",(0,i.jsx)(n.h3,{id:"finding-logs",children:"Finding Logs"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 logs are stored in:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"~/.ros/log/\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"~/.ros/log/\n\u2514\u2500\u2500 2024-01-15-14-30-45-123456/  # Timestamp\n    \u251c\u2500\u2500 launch.log               # Launch file output\n    \u251c\u2500\u2500 my_node-1.log            # Node stderr\n    \u2514\u2500\u2500 my_node-2.log            # Second instance\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Find latest log"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ls -lt ~/.ros/log/ | head -n 5\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reading-logs",children:"Reading Logs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# View node log\ncat ~/.ros/log/latest/my_node-1.log\n\n# Follow log in real-time\ntail -f ~/.ros/log/latest/my_node-1.log\n\n# Search logs for errors\ngrep -r "ERROR" ~/.ros/log/latest/\n'})}),"\n",(0,i.jsx)(n.h3,{id:"log-levels",children:"Log Levels"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 log levels (severity increasing):"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Level"}),(0,i.jsx)(n.th,{children:"Use Case"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"DEBUG"}),(0,i.jsx)(n.td,{children:"Detailed debugging information"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"INFO"}),(0,i.jsx)(n.td,{children:"General informational messages"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"WARN"}),(0,i.jsx)(n.td,{children:"Warning messages (non-critical)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ERROR"}),(0,i.jsx)(n.td,{children:"Error messages (operation failed)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"FATAL"}),(0,i.jsx)(n.td,{children:"Fatal errors (node cannot continue)"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"setting-log-levels",children:"Setting Log Levels"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Per node"})," (command line):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_pkg my_node --ros-args --log-level debug\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Per logger"})," (in code):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Python\nself.get_logger().set_level(rclpy.logging.LoggingSeverity.DEBUG)\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// C++\nauto logger = this->get_logger();\nlogger.set_level(rclcpp::Logger::Level::Debug);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Environment variable"})," (all nodes):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export RCUTILS_CONSOLE_OUTPUT_FORMAT="[{severity}] [{name}]: {message}"\nexport RCUTILS_COLORIZED_OUTPUT=1\nros2 run my_pkg my_node\n'})}),"\n",(0,i.jsx)(n.h3,{id:"logging-in-code",children:"Logging in Code"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Python"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"self.get_logger().debug('Debug message')\nself.get_logger().info('Info message')\nself.get_logger().warn('Warning message')\nself.get_logger().error('Error message')\nself.get_logger().fatal('Fatal message')\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"C++"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'RCLCPP_DEBUG(this->get_logger(), "Debug message");\nRCLCPP_INFO(this->get_logger(), "Info message");\nRCLCPP_WARN(this->get_logger(), "Warning message");\nRCLCPP_ERROR(this->get_logger(), "Error message");\nRCLCPP_FATAL(this->get_logger(), "Fatal message");\n'})}),"\n",(0,i.jsx)(n.h2,{id:"debugging-tools",children:"Debugging Tools"}),"\n",(0,i.jsx)(n.h3,{id:"1-rqt_console",children:"1. rqt_console"}),"\n",(0,i.jsx)(n.p,{children:"Real-time log viewer with filtering."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_console rqt_console\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Filter by severity, node, message content"}),"\n",(0,i.jsx)(n.li,{children:"Color-coded log levels"}),"\n",(0,i.jsx)(n.li,{children:"Pause/resume log stream"}),"\n",(0,i.jsx)(n.li,{children:"Save logs to file"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-rqt_graph",children:"2. rqt_graph"}),"\n",(0,i.jsx)(n.p,{children:"Visualize node and topic connections."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_graph rqt_graph\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verify publishers/subscribers are connected"}),"\n",(0,i.jsx)(n.li,{children:"Find topic name mismatches"}),"\n",(0,i.jsx)(n.li,{children:"Identify orphaned nodes"}),"\n",(0,i.jsx)(n.li,{children:"Visualize system architecture"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Options"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nodes only"}),": Show only nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nodes/Topics (active)"}),": Show active connections"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nodes/Topics (all)"}),": Show all possible connections"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-rqt_topic",children:"3. rqt_topic"}),"\n",(0,i.jsx)(n.p,{children:"Monitor topic data."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_topic rqt_topic\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Real-time topic data visualization"}),"\n",(0,i.jsx)(n.li,{children:"Plot numeric values over time"}),"\n",(0,i.jsx)(n.li,{children:"Inspect message contents"}),"\n",(0,i.jsx)(n.li,{children:"Publish test messages"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-rqt_tf_tree",children:"4. rqt_tf_tree"}),"\n",(0,i.jsx)(n.p,{children:"Visualize TF tree."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_tf_tree rqt_tf_tree\n"})}),"\n",(0,i.jsx)(n.p,{children:"Shows transform relationships between frames."}),"\n",(0,i.jsx)(n.h3,{id:"5-ros2-topic-echo",children:"5. ros2 topic echo"}),"\n",(0,i.jsx)(n.p,{children:"Monitor topic messages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Echo topic\nros2 topic echo /my_topic\n\n# Echo with message type\nros2 topic echo /scan sensor_msgs/msg/LaserScan\n\n# Show only first message\nros2 topic echo /my_topic --once\n\n# Show specific field\nros2 topic echo /odom --field pose.pose.position\n"})}),"\n",(0,i.jsx)(n.h3,{id:"6-ros2-topic-hz",children:"6. ros2 topic hz"}),"\n",(0,i.jsx)(n.p,{children:"Check topic publish rate:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic hz /my_topic\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"average rate: 10.023\n\tmin: 0.099s max: 0.101s std dev: 0.00032s window: 100\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Case"}),": Verify nodes are publishing at expected rate."]}),"\n",(0,i.jsx)(n.h3,{id:"7-ros2-topic-info",children:"7. ros2 topic info"}),"\n",(0,i.jsx)(n.p,{children:"Get topic information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic info /my_topic\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Type: std_msgs/msg/String\nPublisher count: 1\nSubscription count: 2\n"})}),"\n",(0,i.jsx)(n.h3,{id:"8-ros2-node-info",children:"8. ros2 node info"}),"\n",(0,i.jsx)(n.p,{children:"Get node information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 node info /my_node\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"/my_node\n  Subscribers:\n    /input_topic: std_msgs/msg/String\n  Publishers:\n    /output_topic: std_msgs/msg/String\n  Service Servers:\n    /my_node/describe_parameters: rcl_interfaces/srv/DescribeParameters\n  Service Clients:\n  Action Servers:\n  Action Clients:\n"})}),"\n",(0,i.jsx)(n.h2,{id:"build-errors",children:"Build Errors"}),"\n",(0,i.jsx)(n.h3,{id:"python-build-errors",children:"Python Build Errors"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),": ",(0,i.jsx)(n.code,{children:"setup.py not found"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check package structure\nls src/my_pkg/\n# Should have: package.xml, setup.py, setup.cfg\n\n# Verify setup.py exists and is correct\ncat src/my_pkg/setup.py\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),": ",(0,i.jsx)(n.code,{children:"Package 'my_pkg' not found in workspace"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Make sure package.xml <name> matches directory\ncat src/my_pkg/package.xml | grep "<name>"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"c-build-errors",children:"C++ Build Errors"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),": ",(0,i.jsx)(n.code,{children:"CMakeLists.txt not found"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check package structure\nls src/my_cpp_pkg/\n# Should have: package.xml, CMakeLists.txt, src/\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),": ",(0,i.jsx)(n.code,{children:"Could not find package 'rclcpp'"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Add to CMakeLists.txt\nfind_package(rclcpp REQUIRED)\n\n# Add to package.xml\n<depend>rclcpp</depend>\n\n# Install dependencies\nrosdep install --from-paths src --ignore-src -r -y\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),": Compilation errors"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Build with verbose output\ncolcon build --packages-select my_pkg --cmake-args -DCMAKE_VERBOSE_MAKEFILE=ON\n\n# Check for:\n# - Missing includes\n# - Undefined references\n# - Type mismatches\n"})}),"\n",(0,i.jsx)(n.h3,{id:"dependency-errors",children:"Dependency Errors"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error"}),": ",(0,i.jsx)(n.code,{children:"Package 'X' not found"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Check package.xml has dependency\ncat src/my_pkg/package.xml | grep "<depend>X</depend>"\n\n# Install dependencies\nrosdep install --from-paths src --ignore-src -r -y\n\n# Update rosdep database\nrosdep update\n'})}),"\n",(0,i.jsx)(n.h2,{id:"runtime-debugging-workflows",children:"Runtime Debugging Workflows"}),"\n",(0,i.jsx)(n.h3,{id:"workflow-1-node-not-communicating",children:"Workflow 1: Node Not Communicating"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom"}),": Subscriber not receiving messages"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify publisher is running"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 node list | grep publisher_node\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check topic is being published"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic list | grep /my_topic\nros2 topic hz /my_topic\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify subscriber is running"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 node list | grep subscriber_node\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check topic names match exactly"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Publisher's topics\nros2 node info /publisher_node\n\n# Subscriber's topics\nros2 node info /subscriber_node\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check message types match"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic info /my_topic\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Visualize connections"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_graph rqt_graph\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test with ros2 topic echo"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /my_topic\n"})}),"\n",(0,i.jsx)(n.h3,{id:"workflow-2-slow-or-frozen-node",children:"Workflow 2: Slow or Frozen Node"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom"}),": Node appears to hang or runs slowly"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check if node is alive"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 node list\nros2 node info /my_node\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check CPU usage"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"top -p $(pgrep -f my_node)\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check for deadlocks"})," (C++):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Add log statements before/after locks"}),"\n",(0,i.jsxs)(n.li,{children:["Use thread sanitizer: ",(0,i.jsx)(n.code,{children:"-DCMAKE_BUILD_TYPE=Debug"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Profile callback execution"}),":"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import time\n\ndef callback(self, msg):\n    start = time.time()\n    # ... processing ...\n    elapsed = time.time() - start\n    self.get_logger().info(f'Callback took {elapsed:.3f}s')\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check for blocking operations"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Network calls"}),"\n",(0,i.jsx)(n.li,{children:"File I/O"}),"\n",(0,i.jsx)(n.li,{children:"Heavy computation"}),"\n",(0,i.jsx)(n.li,{children:"Use timers instead of sleep in callbacks"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"workflow-3-memory-leak",children:"Workflow 3: Memory Leak"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom"}),": Memory usage grows over time"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monitor memory"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Watch memory usage\nwatch -n 1 'ps aux | grep my_node'\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use valgrind"})," (C++):"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"valgrind --leak-check=full ros2 run my_pkg my_node\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check for Python memory leaks"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import tracemalloc\n\ntracemalloc.start()\n\n# ... run code ...\n\nsnapshot = tracemalloc.take_snapshot()\ntop_stats = snapshot.statistics('lineno')\n\nfor stat in top_stats[:10]:\n    print(stat)\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Common causes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Not destroying publishers/subscribers"}),"\n",(0,i.jsx)(n.li,{children:"Not clearing message buffers"}),"\n",(0,i.jsx)(n.li,{children:"Circular references (Python)"}),"\n",(0,i.jsx)(n.li,{children:"Unfreed pointers (C++)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"workflow-4-launch-file-issues",children:"Workflow 4: Launch File Issues"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom"}),": Nodes don't start or crash immediately"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check launch file syntax"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_pkg my_launch.py --show-args\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Run with debug output"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_pkg my_launch.py --debug\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check individual nodes work"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Test each node separately\nros2 run my_pkg node1\nros2 run my_pkg node2\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check file paths"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Add logging to launch file\nfrom launch.actions import LogInfo\n\nreturn LaunchDescription([\n    LogInfo(msg=f'Config file: {config_file}'),\n    # ...\n])\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify parameters"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# After launch, check parameters were set\nros2 param list /my_node\nros2 param get /my_node my_param\n"})}),"\n",(0,i.jsx)(n.h2,{id:"debugging-strategies",children:"Debugging Strategies"}),"\n",(0,i.jsx)(n.h3,{id:"1-divide-and-conquer",children:"1. Divide and Conquer"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Break down the problem"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Test each component separately"}),"\n",(0,i.jsx)(n.li,{children:"Use simple test cases first"}),"\n",(0,i.jsx)(n.li,{children:"Add complexity incrementally"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-print-debugging",children:"2. Print Debugging"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Add log statements"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"self.get_logger().info(f'Variable x = {x}')\nself.get_logger().info(f'Entering function foo()')\nself.get_logger().info(f'Message received: {msg.data}')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-binary-search",children:"3. Binary Search"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Comment out code sections"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def callback(self, msg):\n    # self.process_part1(msg)  # Comment out\n    self.process_part2(msg)\n    # self.process_part3(msg)  # Comment out\n"})}),"\n",(0,i.jsx)(n.p,{children:"Find which part causes the issue."}),"\n",(0,i.jsx)(n.h3,{id:"4-minimal-reproducible-example",children:"4. Minimal Reproducible Example"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create simple test case"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Minimal publisher\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_pub')\n        self.pub = self.create_publisher(String, 'test', 10)\n        self.timer = self.create_timer(1.0, self.publish)\n\n    def publish(self):\n        msg = String()\n        msg.data = 'test'\n        self.pub.publish(msg)\n        self.get_logger().info('Published!')\n"})}),"\n",(0,i.jsx)(n.p,{children:"If this works, gradually add complexity until it breaks."}),"\n",(0,i.jsx)(n.h3,{id:"5-check-assumptions",children:"5. Check Assumptions"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verify your assumptions"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Don't assume:\nvalue = self.get_parameter('my_param').value\n\n# Verify:\nif self.has_parameter('my_param'):\n    value = self.get_parameter('my_param').value\n    self.get_logger().info(f'Parameter value: {value}')\nelse:\n    self.get_logger().error('Parameter not set!')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"common-mistakes-to-avoid",children:"Common Mistakes to Avoid"}),"\n",(0,i.jsx)(n.h3,{id:"1-not-sourcing-workspace",children:"1. Not Sourcing Workspace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Wrong: Run node without sourcing\nros2 run my_pkg my_node  # Package not found!\n\n# Correct:\nsource ~/robot_ws/install/setup.bash\nros2 run my_pkg my_node\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-hardcoded-paths",children:"2. Hardcoded Paths"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Wrong: Hardcoded path\nurdf_file = '/home/user/my_robot/robot.urdf'  # Breaks on other machines!\n\n# Correct: Use package share directory\nfrom ament_index_python.packages import get_package_share_directory\nurdf_file = os.path.join(get_package_share_directory('my_pkg'), 'urdf', 'robot.urdf')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-ignoring-warnings",children:"3. Ignoring Warnings"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Warning: QoS mismatch detected\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Don't ignore warnings!"})," They often indicate future problems."]}),"\n",(0,i.jsx)(n.h3,{id:"4-not-checking-return-values",children:"4. Not Checking Return Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Wrong: Assume success\nself.call_service(request)\n\n# Correct: Check response\nresponse = self.call_service(request)\nif response.success:\n    self.get_logger().info('Service succeeded')\nelse:\n    self.get_logger().error(f'Service failed: {response.message}')\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-blocking-in-callbacks",children:"5. Blocking in Callbacks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Wrong: Blocking operation in callback\ndef callback(self, msg):\n    time.sleep(5)  # Blocks executor!\n    self.process(msg)\n\n# Correct: Use timer or async\ndef callback(self, msg):\n    self.queue.put(msg)  # Non-blocking\n\ndef timer_callback(self):\n    if not self.queue.empty():\n        msg = self.queue.get()\n        self.process(msg)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"debugging-checklist",children:"Debugging Checklist"}),"\n",(0,i.jsx)(n.p,{children:"When facing an issue, go through this checklist:"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Is ROS 2 sourced? (",(0,i.jsx)(n.code,{children:"source /opt/ros/humble/setup.bash"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Is workspace sourced? (",(0,i.jsx)(n.code,{children:"source ~/robot_ws/install/setup.bash"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Is the package built? (",(0,i.jsx)(n.code,{children:"colcon build --packages-select my_pkg"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Are all nodes running? (",(0,i.jsx)(n.code,{children:"ros2 node list"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Do topic names match exactly? (",(0,i.jsx)(n.code,{children:"ros2 topic list"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Do message types match? (",(0,i.jsx)(n.code,{children:"ros2 topic info /topic"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Are parameters declared? (",(0,i.jsx)(n.code,{children:"ros2 param list /node"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Are TF frames being published? (",(0,i.jsx)(n.code,{children:"ros2 run tf2_tools view_frames"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Any errors in logs? (",(0,i.jsx)(n.code,{children:"tail -f ~/.ros/log/latest/*.log"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Does ",(0,i.jsx)(n.code,{children:"ros2 doctor"})," show issues? (",(0,i.jsx)(n.code,{children:"ros2 doctor"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"practice-exercises",children:"Practice Exercises"}),"\n",(0,i.jsx)(n.h3,{id:"exercise-1-debug-communication-issue",children:"Exercise 1: Debug Communication Issue"}),"\n",(0,i.jsx)(n.p,{children:"Given two nodes that should communicate but don't:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"ros2 node list"})," and ",(0,i.jsx)(n.code,{children:"ros2 topic list"})," to diagnose"]}),"\n",(0,i.jsx)(n.li,{children:"Identify the mismatch (topic name, namespace, or type)"}),"\n",(0,i.jsx)(n.li,{children:"Fix using remapping or code changes"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exercise-2-debug-build-error",children:"Exercise 2: Debug Build Error"}),"\n",(0,i.jsx)(n.p,{children:"Given a package that won't build:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Identify missing dependencies in package.xml"}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"rosdep"})," to install them"]}),"\n",(0,i.jsx)(n.li,{children:"Fix CMakeLists.txt or setup.py issues"}),"\n",(0,i.jsx)(n.li,{children:"Successfully build the package"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exercise-3-performance-debug",children:"Exercise 3: Performance Debug"}),"\n",(0,i.jsx)(n.p,{children:"Given a slow node:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Add timing logs to identify bottleneck"}),"\n",(0,i.jsx)(n.li,{children:"Profile callback execution times"}),"\n",(0,i.jsx)(n.li,{children:"Optimize the slowest part"}),"\n",(0,i.jsxs)(n.li,{children:["Verify improvement with ",(0,i.jsx)(n.code,{children:"ros2 topic hz"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"ros2 doctor"})})," quickly diagnoses common ROS 2 issues"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Always check"}),": sourced workspace, built packages, running nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Logs"})," are in ",(0,i.jsx)(n.code,{children:"~/.ros/log/"})," - check them for errors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"rqt tools"})," (rqt_graph, rqt_console) visualize system state"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Topic echo"})," and ",(0,i.jsx)(n.strong,{children:"node info"})," verify communication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Systematic workflow"}),": isolate, test, verify, fix"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Common mistakes"}),": not sourcing, hardcoded paths, blocking callbacks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Prevention"}),": good logging, error checking, testing"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsx)(n.p,{children:"Now that you can debug ROS 2 systems:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Next Lesson"}),": ",(0,i.jsx)(n.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/assessment",children:"Assessment"})," - Apply your skills to a complete project"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Related"}),": ",(0,i.jsx)(n.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch4-packages/launch-files",children:"Launch Files"})," - Advanced launch debugging"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Demos/Logging-and-logger-configuration.html",children:"ROS 2 Logging Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/How-To-Guides/Installation-Troubleshooting.html",children:"ROS 2 Troubleshooting Guide"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts/About-RQt.html",children:"rqt User Guide"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Checkpoint"}),": You can now systematically debug and troubleshoot ROS 2 systems!"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var r=s(6540);const i={},l=r.createContext(i);function c(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);