"use strict";(globalThis.webpackChunkphysical_ai_course=globalThis.webpackChunkphysical_ai_course||[]).push([[7195],{3494:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"module-3-isaac/ch7-isaac-sim/domain-randomization","title":"Domain Randomization","description":"Overview","source":"@site/docs/module-3-isaac/ch7-isaac-sim/domain-randomization.md","sourceDirName":"module-3-isaac/ch7-isaac-sim","slug":"/module-3-isaac/ch7-isaac-sim/domain-randomization","permalink":"/physical-ai-humanoid-robotics/docs/module-3-isaac/ch7-isaac-sim/domain-randomization","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-3-isaac/ch7-isaac-sim/domain-randomization.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Synthetic Data Generation","permalink":"/physical-ai-humanoid-robotics/docs/module-3-isaac/ch7-isaac-sim/synthetic-data"},"next":{"title":"Visual SLAM (VSLAM)","permalink":"/physical-ai-humanoid-robotics/docs/module-3-isaac/ch8-perception/vslam"}}');var t=i(4848),s=i(8453);const o={},a="Domain Randomization",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Part 1: The Reality Gap &amp; Why Randomization Works",id:"part-1-the-reality-gap--why-randomization-works",level:2},{value:"What is the Reality Gap?",id:"what-is-the-reality-gap",level:3},{value:"How Domain Randomization Solves This",id:"how-domain-randomization-solves-this",level:3},{value:"Part 2: Visual Randomization (Textures &amp; Materials)",id:"part-2-visual-randomization-textures--materials",level:2},{value:"Randomizing Object Colors",id:"randomizing-object-colors",level:3},{value:"Randomizing Textures",id:"randomizing-textures",level:3},{value:"Randomizing Floor Textures",id:"randomizing-floor-textures",level:3},{value:"Part 3: Lighting Randomization",id:"part-3-lighting-randomization",level:2},{value:"Randomizing Light Intensity",id:"randomizing-light-intensity",level:3},{value:"Randomizing Light Color (Temperature)",id:"randomizing-light-color-temperature",level:3},{value:"Randomizing Light Position",id:"randomizing-light-position",level:3},{value:"Complete Lighting Randomization Example",id:"complete-lighting-randomization-example",level:3},{value:"Part 4: Physics Randomization",id:"part-4-physics-randomization",level:2},{value:"Randomizing Object Mass",id:"randomizing-object-mass",level:3},{value:"Randomizing Friction",id:"randomizing-friction",level:3},{value:"Randomizing Restitution (Bounciness)",id:"randomizing-restitution-bounciness",level:3},{value:"Randomizing Joint Damping (For Robots)",id:"randomizing-joint-damping-for-robots",level:3},{value:"Part 5: Pose &amp; Scene Composition Randomization",id:"part-5-pose--scene-composition-randomization",level:2},{value:"Randomizing Object Positions",id:"randomizing-object-positions",level:3},{value:"Randomizing Object Rotations",id:"randomizing-object-rotations",level:3},{value:"Randomizing Object Scales",id:"randomizing-object-scales",level:3},{value:"Randomizing Number of Objects",id:"randomizing-number-of-objects",level:3},{value:"Part 6: Advanced Randomization Strategies",id:"part-6-advanced-randomization-strategies",level:2},{value:"Correlated Randomization",id:"correlated-randomization",level:3},{value:"Structured Randomization (Per-Class)",id:"structured-randomization-per-class",level:3},{value:"Part 7: Implementing a Complete Randomization Pipeline",id:"part-7-implementing-a-complete-randomization-pipeline",level:2},{value:"Complete Example: <code>warehouse_randomization_pipeline.py</code>",id:"complete-example-warehouse_randomization_pipelinepy",level:3},{value:"Part 8: Measuring Sim-to-Real Transfer Success",id:"part-8-measuring-sim-to-real-transfer-success",level:2},{value:"Validation Metrics",id:"validation-metrics",level:3},{value:"Best Practices for Sim-to-Real Transfer",id:"best-practices-for-sim-to-real-transfer",level:3},{value:"Part 9: Hands-On Exercise",id:"part-9-hands-on-exercise",level:2},{value:"Exercise: Implement Comprehensive Randomization for Tabletop Scene",id:"exercise-implement-comprehensive-randomization-for-tabletop-scene",level:3},{value:"Requirements",id:"requirements",level:4},{value:"Deliverables",id:"deliverables",level:4},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"domain-randomization",children:"Domain Randomization"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Domain randomization"})," is a powerful technique that bridges the gap between simulation and reality. By training AI models on highly varied synthetic data (randomized textures, lighting, physics, object poses), robots learn to generalize to the unpredictable real world. This enables ",(0,t.jsx)(n.strong,{children:"sim-to-real transfer"})," - deploying policies trained purely in simulation directly on physical robots."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"What You'll Learn"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Randomize textures, materials, and lighting in Isaac Sim"}),"\n",(0,t.jsx)(n.li,{children:"Vary physics parameters (friction, mass, damping)"}),"\n",(0,t.jsx)(n.li,{children:"Randomize object poses, scales, and quantities"}),"\n",(0,t.jsx)(n.li,{children:"Implement systematic randomization strategies"}),"\n",(0,t.jsx)(n.li,{children:"Validate sim-to-real transfer effectiveness"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Prerequisites"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Completed: Synthetic Data Generation (previous lesson)"}),"\n",(0,t.jsx)(n.li,{children:"Python programming"}),"\n",(0,t.jsx)(n.li,{children:"Understanding of AI training concepts (transfer learning, generalization)"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Estimated Time"}),": 2-3 hours"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:'Understand the "reality gap" and why domain randomization helps'}),"\n",(0,t.jsx)(n.li,{children:"Randomize visual properties (colors, textures, lighting)"}),"\n",(0,t.jsx)(n.li,{children:"Randomize physical properties (mass, friction, restitution)"}),"\n",(0,t.jsx)(n.li,{children:"Randomize scene composition (object count, poses, scales)"}),"\n",(0,t.jsx)(n.li,{children:"Implement complete randomization pipelines for data generation"}),"\n",(0,t.jsx)(n.li,{children:"Measure sim-to-real transfer success"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-1-the-reality-gap--why-randomization-works",children:"Part 1: The Reality Gap & Why Randomization Works"}),"\n",(0,t.jsx)(n.h3,{id:"what-is-the-reality-gap",children:"What is the Reality Gap?"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"reality gap"})," is the difference between simulated and real-world environments:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Aspect"}),(0,t.jsx)(n.th,{children:"Simulation"}),(0,t.jsx)(n.th,{children:"Real World"}),(0,t.jsx)(n.th,{children:"Gap"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Lighting"})}),(0,t.jsx)(n.td,{children:"Perfect HDR environments"}),(0,t.jsx)(n.td,{children:"Unpredictable (clouds, shadows, reflections)"}),(0,t.jsx)(n.td,{children:"Large"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Physics"})}),(0,t.jsx)(n.td,{children:"Idealized contact models"}),(0,t.jsx)(n.td,{children:"Messy (slipping, bouncing, deformation)"}),(0,t.jsx)(n.td,{children:"Medium"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Sensors"})}),(0,t.jsx)(n.td,{children:"Noise-free data"}),(0,t.jsx)(n.td,{children:"Sensor noise, motion blur, occlusion"}),(0,t.jsx)(n.td,{children:"Large"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Textures"})}),(0,t.jsx)(n.td,{children:"Clean 3D models"}),(0,t.jsx)(n.td,{children:"Scratches, dirt, wear, reflections"}),(0,t.jsx)(n.td,{children:"Medium"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": A robot trained in a pristine simulation fails when encountering real-world variability."]}),"\n",(0,t.jsx)(n.h3,{id:"how-domain-randomization-solves-this",children:"How Domain Randomization Solves This"}),"\n",(0,t.jsxs)(n.p,{children:["Instead of making simulation perfectly realistic (impossible), we make it ",(0,t.jsx)(n.strong,{children:"unrealistically diverse"}),":"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Strategy"}),': Train on 1000s of randomized scenarios \u2192 Model learns invariant features (e.g., "an apple is round, regardless of color or lighting")']}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Without randomization"}),": Train on perfect red apples in white light \u2192 Fails on yellow apples in sunlight"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"With randomization"}),": Train on random fruit colors (red, green, yellow, purple!) in random lighting \u2192 Recognizes all real apples"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"The Randomization Paradox",type:"tip",children:(0,t.jsxs)(n.p,{children:["Making simulation ",(0,t.jsx)(n.strong,{children:"less"})," realistic (but more diverse) actually ",(0,t.jsx)(n.strong,{children:"improves"})," real-world performance. This counterintuitive insight drives modern sim-to-real robotics!"]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-2-visual-randomization-textures--materials",children:"Part 2: Visual Randomization (Textures & Materials)"}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-object-colors",children:"Randomizing Object Colors"}),"\n",(0,t.jsx)(n.p,{children:"Let's start simple: randomize the color of boxes in a warehouse scene."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Python Script"})," (",(0,t.jsx)(n.code,{children:"randomize_colors.py"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import omni.replicator.core as rep\nimport random\n\n# Get all box objects in scene\nboxes = rep.get.prims(path_pattern="/World/Warehouse/Box_*")\n\n# Randomize colors for each frame\nwith rep.trigger.on_frame(num_frames=100):\n    with boxes:\n        # Random RGB color for each box\n        rep.randomizer.color(\n            colors=rep.distribution.uniform((0, 0, 0), (1, 1, 1))  # Full color spectrum\n        )\n\n# Run data generation\nrep.orchestrator.run()\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result"}),": Each frame, boxes have completely random colors (red, blue, green, purple, etc.)"]}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-textures",children:"Randomizing Textures"}),"\n",(0,t.jsx)(n.p,{children:"For more realism, randomize entire textures:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Prepare texture library\ntexture_paths = [\n    "omniverse://localhost/NVIDIA/Materials/Base/Wood/Oak.mdl",\n    "omniverse://localhost/NVIDIA/Materials/Base/Metal/Aluminum.mdl",\n    "omniverse://localhost/NVIDIA/Materials/Base/Stone/Concrete.mdl",\n    "omniverse://localhost/NVIDIA/Materials/Base/Plastic/Glossy_Plastic.mdl"\n]\n\n# Randomize materials\nwith rep.trigger.on_frame(num_frames=100):\n    with boxes:\n        rep.randomizer.materials(\n            materials=rep.distribution.choice(texture_paths)\n        )\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result"}),": Boxes randomly become wood, metal, concrete, or plastic each frame"]}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-floor-textures",children:"Randomizing Floor Textures"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'ground_plane = rep.get.prims(path_pattern="/World/GroundPlane")\n\nfloor_textures = [\n    "concrete_001.mdl",\n    "tile_checkered.mdl",\n    "wood_planks.mdl",\n    "asphalt.mdl"\n]\n\nwith rep.trigger.on_frame(num_frames=100):\n    with ground_plane:\n        rep.randomizer.materials(\n            materials=rep.distribution.choice(floor_textures)\n        )\n'})}),"\n",(0,t.jsx)(n.admonition,{title:"Texture Diversity Balance",type:"caution",children:(0,t.jsxs)(n.p,{children:["Too much texture variation (e.g., psychedelic colors) can confuse models. Aim for diversity within ",(0,t.jsx)(n.em,{children:"plausible"})," real-world ranges (browns, grays, natural colors)."]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-3-lighting-randomization",children:"Part 3: Lighting Randomization"}),"\n",(0,t.jsxs)(n.p,{children:["Lighting has the ",(0,t.jsx)(n.strong,{children:"largest impact"})," on sim-to-real transfer. Randomize intensity, color, and direction."]}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-light-intensity",children:"Randomizing Light Intensity"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Get all lights in scene\nlights = rep.get.prims(path_pattern="/World/Lights/*")\n\nwith rep.trigger.on_frame(num_frames=100):\n    with lights:\n        rep.randomizer.attribute(\n            "intensity",\n            rep.distribution.uniform(500, 10000)  # From dim to very bright\n        )\n'})}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-light-color-temperature",children:"Randomizing Light Color (Temperature)"}),"\n",(0,t.jsx)(n.p,{children:"Simulate different times of day (warm sunset vs. cool overcast):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'with rep.trigger.on_frame(num_frames=100):\n    with lights:\n        # Color temperature (Kelvin)\n        # 2500K = Warm (sunset), 6500K = Neutral, 9000K = Cool (overcast)\n        color_temp = rep.distribution.uniform(2500, 9000)\n        rep.randomizer.attribute("colorTemperature", color_temp)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-light-position",children:"Randomizing Light Position"}),"\n",(0,t.jsx)(n.p,{children:"Move lights to simulate changing sun angle or moving clouds:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"with rep.trigger.on_frame(num_frames=100):\n    with lights:\n        # Random position in hemisphere above scene\n        rep.modify.pose(\n            position=rep.distribution.uniform((-500, -500, 100), (500, 500, 800))\n        )\n"})}),"\n",(0,t.jsx)(n.h3,{id:"complete-lighting-randomization-example",children:"Complete Lighting Randomization Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Randomize all lighting aspects simultaneously\nwith rep.trigger.on_frame(num_frames=1000):\n    # Dome light (ambient)\n    dome_light = rep.get.prims(path_pattern="/World/DomeLight")\n    with dome_light:\n        rep.randomizer.attribute("intensity", rep.distribution.uniform(300, 1500))\n        rep.randomizer.attribute("colorTemperature", rep.distribution.uniform(4000, 8000))\n\n    # Directional light (sun)\n    sun_light = rep.get.prims(path_pattern="/World/SunLight")\n    with sun_light:\n        rep.randomizer.attribute("intensity", rep.distribution.uniform(1.0, 5.0))\n        rep.randomizer.attribute("angle", rep.distribution.uniform(0, 90))  # Sun elevation\n\n    # Rect lights (ceiling panels)\n    rect_lights = rep.get.prims(path_pattern="/World/CeilingLights/*")\n    with rect_lights:\n        # Randomly turn some lights on/off\n        rep.randomizer.attribute("visibility", rep.distribution.choice([True, False]))\n        rep.randomizer.attribute("intensity", rep.distribution.uniform(2000, 8000))\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result"}),": Each frame simulates different lighting conditions (morning, midday, overcast, artificial light, etc.)"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-4-physics-randomization",children:"Part 4: Physics Randomization"}),"\n",(0,t.jsx)(n.p,{children:"Physical properties affect how robots interact with objects. Randomize friction, mass, and restitution."}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-object-mass",children:"Randomizing Object Mass"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import omni.physx as physx\n\n# Get all box physics bodies\nboxes = rep.get.prims(path_pattern="/World/Warehouse/Box_*")\n\nwith rep.trigger.on_frame(num_frames=100):\n    with boxes:\n        # Random mass (0.1 kg to 5 kg)\n        rep.randomizer.attribute("physics:mass", rep.distribution.uniform(0.1, 5.0))\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why This Matters"}),": A robot grasping a box needs to adapt to different weights. Randomizing mass forces the model to learn robust grasping strategies."]}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-friction",children:"Randomizing Friction"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Randomize friction coefficient\nwith rep.trigger.on_frame(num_frames=100):\n    with boxes:\n        # Static friction (0.1 = slippery, 1.0 = grippy)\n        rep.randomizer.attribute(\n            "physics:staticFriction",\n            rep.distribution.uniform(0.1, 1.0)\n        )\n        # Dynamic friction\n        rep.randomizer.attribute(\n            "physics:dynamicFriction",\n            rep.distribution.uniform(0.05, 0.9)\n        )\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),": Training a mobile robot to push objects. Random friction simulates different floor surfaces (tile, carpet, concrete)."]}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-restitution-bounciness",children:"Randomizing Restitution (Bounciness)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'with rep.trigger.on_frame(num_frames=100):\n    with boxes:\n        # Restitution (0.0 = no bounce, 1.0 = perfect bounce)\n        rep.randomizer.attribute(\n            "physics:restitution",\n            rep.distribution.uniform(0.0, 0.8)\n        )\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),": Training a robot to catch falling objects. Random bounciness prepares for unpredictable real-world behavior."]}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-joint-damping-for-robots",children:"Randomizing Joint Damping (For Robots)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# For robot joints (e.g., humanoid arms)\nrobot_joints = rep.get.prims(path_pattern="/World/Humanoid/*/Joint_*")\n\nwith rep.trigger.on_frame(num_frames=100):\n    with robot_joints:\n        # Joint damping (resistance to motion)\n        rep.randomizer.attribute(\n            "drive:damping",\n            rep.distribution.uniform(0.1, 10.0)\n        )\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why"}),": Real robot joints have varying stiffness due to temperature, wear, etc. Randomized damping builds robustness."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-5-pose--scene-composition-randomization",children:"Part 5: Pose & Scene Composition Randomization"}),"\n",(0,t.jsx)(n.p,{children:"Randomize object positions, orientations, scales, and quantities."}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-object-positions",children:"Randomizing Object Positions"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Scatter boxes randomly on warehouse floor\nboxes = rep.get.prims(path_pattern="/World/Warehouse/Box_*")\n\nwith rep.trigger.on_frame(num_frames=100):\n    with boxes:\n        # Random position within bounds\n        rep.modify.pose(\n            position=rep.distribution.uniform(\n                (-400, -400, 10),  # Min (x, y, z)\n                (400, 400, 200)     # Max (x, y, z)\n            )\n        )\n'})}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-object-rotations",children:"Randomizing Object Rotations"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"with rep.trigger.on_frame(num_frames=100):\n    with boxes:\n        # Random rotation (Euler angles in degrees)\n        rep.modify.pose(\n            rotation=rep.distribution.uniform(\n                (0, 0, 0),       # Min rotation\n                (360, 360, 360)  # Max rotation (full 3D randomization)\n            )\n        )\n"})}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-object-scales",children:"Randomizing Object Scales"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'with rep.trigger.on_frame(num_frames=100):\n    with boxes:\n        # Random scale (0.5x to 2x original size)\n        rep.modify.attribute(\n            "xformOp:scale",\n            rep.distribution.uniform((0.5, 0.5, 0.5), (2.0, 2.0, 2.0))\n        )\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),": Training object detection to recognize objects at different distances/sizes."]}),"\n",(0,t.jsx)(n.h3,{id:"randomizing-number-of-objects",children:"Randomizing Number of Objects"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Spawn random number of boxes each frame\nwith rep.trigger.on_frame(num_frames=100):\n    num_boxes = rep.distribution.uniform(5, 20)  # Random count\n\n    # Delete existing boxes\n    rep.utils.remove(boxes)\n\n    # Spawn new boxes\n    boxes = rep.create.from_usd(\n        usd_path="omniverse://localhost/NVIDIA/Assets/Isaac/.../box.usd",\n        count=num_boxes,\n        semantics=[("class", "box")]\n    )\n\n    # Randomize their positions\n    with boxes:\n        rep.modify.pose(\n            position=rep.distribution.uniform((-400, -400, 10), (400, 400, 200))\n        )\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result"}),": Each frame has a different number of objects at random locations - very diverse data!"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-6-advanced-randomization-strategies",children:"Part 6: Advanced Randomization Strategies"}),"\n",(0,t.jsx)(n.h3,{id:"correlated-randomization",children:"Correlated Randomization"}),"\n",(0,t.jsx)(n.p,{children:"Some variables should be randomized together (e.g., time of day affects both lighting color and intensity):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Define time-of-day correlation\ndef randomize_time_of_day():\n    time = random.choice(["morning", "midday", "evening", "night"])\n\n    if time == "morning":\n        sun_intensity = rep.distribution.uniform(2.0, 3.5)\n        sun_color_temp = rep.distribution.uniform(4000, 5500)  # Warm\n        ambient_intensity = rep.distribution.uniform(800, 1200)\n    elif time == "midday":\n        sun_intensity = rep.distribution.uniform(3.5, 5.0)\n        sun_color_temp = rep.distribution.uniform(5500, 6500)  # Neutral\n        ambient_intensity = rep.distribution.uniform(1200, 1800)\n    elif time == "evening":\n        sun_intensity = rep.distribution.uniform(1.0, 2.0)\n        sun_color_temp = rep.distribution.uniform(2500, 4000)  # Very warm (sunset)\n        ambient_intensity = rep.distribution.uniform(400, 800)\n    else:  # night\n        sun_intensity = rep.distribution.uniform(0.0, 0.5)\n        sun_color_temp = rep.distribution.uniform(6000, 8000)  # Cool (moonlight)\n        ambient_intensity = rep.distribution.uniform(100, 400)\n\n    return sun_intensity, sun_color_temp, ambient_intensity\n\n# Apply correlated randomization\nwith rep.trigger.on_frame(num_frames=1000):\n    intensity, color_temp, ambient = randomize_time_of_day()\n\n    sun_light = rep.get.prims(path_pattern="/World/SunLight")\n    with sun_light:\n        rep.randomizer.attribute("intensity", intensity)\n        rep.randomizer.attribute("colorTemperature", color_temp)\n\n    dome_light = rep.get.prims(path_pattern="/World/DomeLight")\n    with dome_light:\n        rep.randomizer.attribute("intensity", ambient)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"structured-randomization-per-class",children:"Structured Randomization (Per-Class)"}),"\n",(0,t.jsx)(n.p,{children:"Different object types may need different randomization ranges:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Boxes: High color variation (packaging is diverse)\nboxes = rep.get.prims(path_pattern="/World/Warehouse/Box_*", semantics=[("class", "box")])\nwith rep.trigger.on_frame():\n    with boxes:\n        rep.randomizer.color(colors=rep.distribution.uniform((0, 0, 0), (1, 1, 1)))\n\n# Robots: Limited color variation (mostly gray/black in real world)\nrobots = rep.get.prims(path_pattern="/World/Robots/*", semantics=[("class", "robot")])\nwith rep.trigger.on_frame():\n    with robots:\n        rep.randomizer.color(\n            colors=rep.distribution.choice([\n                (0.2, 0.2, 0.2),  # Dark gray\n                (0.4, 0.4, 0.4),  # Medium gray\n                (0.1, 0.1, 0.1)   # Black\n            ])\n        )\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-7-implementing-a-complete-randomization-pipeline",children:"Part 7: Implementing a Complete Randomization Pipeline"}),"\n",(0,t.jsx)(n.p,{children:"Let's combine all techniques into a comprehensive warehouse randomization script."}),"\n",(0,t.jsxs)(n.h3,{id:"complete-example-warehouse_randomization_pipelinepy",children:["Complete Example: ",(0,t.jsx)(n.code,{children:"warehouse_randomization_pipeline.py"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import omni.replicator.core as rep\nimport random\n\n# Initialize scene\nrep.new_layer()\n\n# Load warehouse base scene\nwarehouse = rep.create.from_usd("omniverse://localhost/.../warehouse_base.usd")\n\n# Define randomization parameters\nNUM_FRAMES = 5000  # Generate 5000 diverse images\n\n# 1. Object randomization\nboxes = rep.get.prims(path_pattern="/World/Warehouse/Box_*")\npallets = rep.get.prims(path_pattern="/World/Warehouse/Pallet_*")\nrobots = rep.get.prims(path_pattern="/World/Warehouse/Robot_*")\n\nwith rep.trigger.on_frame(num_frames=NUM_FRAMES):\n    # Visual randomization\n    with boxes:\n        rep.randomizer.color(colors=rep.distribution.uniform((0, 0, 0), (1, 1, 1)))\n        rep.modify.pose(\n            position=rep.distribution.uniform((-400, -400, 10), (400, 400, 150)),\n            rotation=rep.distribution.uniform((0, 0, 0), (360, 360, 360))\n        )\n\n    # Physics randomization\n    with boxes:\n        rep.randomizer.attribute("physics:mass", rep.distribution.uniform(0.5, 3.0))\n        rep.randomizer.attribute("physics:staticFriction", rep.distribution.uniform(0.2, 0.9))\n\n    # Lighting randomization\n    dome_light = rep.get.prims(path_pattern="/World/DomeLight")\n    with dome_light:\n        rep.randomizer.attribute("intensity", rep.distribution.uniform(500, 2000))\n        rep.randomizer.attribute("colorTemperature", rep.distribution.uniform(3000, 8000))\n\n    sun_light = rep.get.prims(path_pattern="/World/SunLight")\n    with sun_light:\n        rep.randomizer.attribute("intensity", rep.distribution.uniform(1.0, 4.0))\n        rep.randomizer.attribute("angle", rep.distribution.uniform(15, 75))\n\n    # Camera randomization\n    camera = rep.create.camera(resolution=(1280, 720))\n    with camera:\n        rep.modify.pose(\n            position=rep.distribution.uniform((-300, -300, 50), (300, 300, 250)),\n            look_at=rep.distribution.uniform((-100, -100, 0), (100, 100, 100))\n        )\n\n# Configure data output\nrgb_writer = rep.WriterRegistry.get("BasicWriter")\nrgb_writer.initialize(output_dir="/data/warehouse_randomized", rgb=True, distance_to_camera=True)\n\n# Attach annotators\ncamera.add_annotator(rep.AnnotatorRegistry.get_annotator("rgb"))\ncamera.add_annotator(rep.AnnotatorRegistry.get_annotator("distance_to_camera"))\ncamera.add_annotator(rep.AnnotatorRegistry.get_annotator("semantic_segmentation"))\ncamera.add_annotator(rep.AnnotatorRegistry.get_annotator("bounding_box_2d_tight"))\n\n# Run pipeline\nrep.orchestrator.run()\n\nprint(f"Generated {NUM_FRAMES} frames with full domain randomization!")\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result"}),": 5000 highly diverse images ready for AI training!"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-8-measuring-sim-to-real-transfer-success",children:"Part 8: Measuring Sim-to-Real Transfer Success"}),"\n",(0,t.jsx)(n.p,{children:"After training on randomized data, how do you know if it will work in the real world?"}),"\n",(0,t.jsx)(n.h3,{id:"validation-metrics",children:"Validation Metrics"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Metric"}),(0,t.jsx)(n.th,{children:"Simulation"}),(0,t.jsx)(n.th,{children:"Real World"}),(0,t.jsx)(n.th,{children:"Target"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Object Detection mAP"})}),(0,t.jsx)(n.td,{children:"0.92"}),(0,t.jsx)(n.td,{children:"0.78"}),(0,t.jsx)(n.td,{children:">0.75"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Grasp Success Rate"})}),(0,t.jsx)(n.td,{children:"95%"}),(0,t.jsx)(n.td,{children:"82%"}),(0,t.jsx)(n.td,{children:">80%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Navigation Success"})}),(0,t.jsx)(n.td,{children:"98%"}),(0,t.jsx)(n.td,{children:"85%"}),(0,t.jsx)(n.td,{children:">85%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Task Completion Time"})}),(0,t.jsx)(n.td,{children:"12s"}),(0,t.jsx)(n.td,{children:"18s"}),(0,t.jsx)(n.td,{children:"<20s"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal"}),": Real-world performance within ",(0,t.jsx)(n.strong,{children:"10-15%"})," of simulation performance"]}),"\n",(0,t.jsx)(n.h3,{id:"best-practices-for-sim-to-real-transfer",children:"Best Practices for Sim-to-Real Transfer"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Start conservative"}),": Randomize one variable at a time, test transfer"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Prioritize visual randomization"}),": Lighting and textures have biggest impact"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keep physics realistic"}),": Don't randomize beyond plausible real-world ranges"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validate incrementally"}),": Test on real robot after each randomization addition"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Collect real-world failure cases"}),": Add those scenarios to simulation"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"part-9-hands-on-exercise",children:"Part 9: Hands-On Exercise"}),"\n",(0,t.jsx)(n.h3,{id:"exercise-implement-comprehensive-randomization-for-tabletop-scene",children:"Exercise: Implement Comprehensive Randomization for Tabletop Scene"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Objective"}),": Create a domain randomization pipeline for the tabletop manipulation scene from the previous lesson."]}),"\n",(0,t.jsx)(n.h4,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Visual Randomization"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Object colors: Full RGB spectrum"}),"\n",(0,t.jsx)(n.li,{children:"Table texture: 3 material options (wood, plastic, metal)"}),"\n",(0,t.jsx)(n.li,{children:"Floor texture: 2 options (tile, concrete)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Lighting Randomization"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Dome light intensity: 300-1500"}),"\n",(0,t.jsx)(n.li,{children:"Color temperature: 3000K-7000K"}),"\n",(0,t.jsx)(n.li,{children:"Rect light (overhead): On/off randomly, intensity 1000-5000"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Physics Randomization"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Object mass: 0.1kg - 0.5kg"}),"\n",(0,t.jsx)(n.li,{children:"Friction: 0.3 - 0.8"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pose Randomization"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Object positions: Random on tabletop (no overlap)"}),"\n",(0,t.jsx)(n.li,{children:"Object rotations: Full 3D random"}),"\n",(0,t.jsx)(n.li,{children:"Camera position: Orbit around table (radius 80-150cm, height 50-120cm)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Generate 2000 diverse images"})," with all randomizations active"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"deliverables",children:"Deliverables"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Python script: ",(0,t.jsx)(n.code,{children:"tabletop_randomization.py"})]}),"\n",(0,t.jsx)(n.li,{children:"Dataset: 2000 RGB images + depth + annotations"}),"\n",(0,t.jsxs)(n.li,{children:["Validation report:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Show 10 example images demonstrating diversity"}),"\n",(0,t.jsx)(n.li,{children:"Histogram of lighting intensities"}),"\n",(0,t.jsx)(n.li,{children:"Histogram of object counts per frame"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Estimated Time"}),": 2 hours"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"In this lesson, you learned:"}),"\n",(0,t.jsx)(n.p,{children:"\u2705 The reality gap and why domain randomization solves it\n\u2705 Visual randomization (colors, textures, materials, lighting)\n\u2705 Physics randomization (mass, friction, restitution, damping)\n\u2705 Pose and composition randomization (positions, rotations, scales, counts)\n\u2705 Advanced strategies (correlated randomization, structured randomization)\n\u2705 Complete randomization pipelines for large-scale data generation\n\u2705 Measuring sim-to-real transfer success"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key Takeaways"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Diversity > Realism"}),": Unrealistically diverse simulation \u2192 Better real-world performance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lighting is critical"}),": Has the largest impact on sim-to-real transfer"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Physics should stay plausible"}),": Don't randomize beyond real-world ranges"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validate iteratively"}),": Test on real robot after each randomization step"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Congratulations!"})," You've completed Chapter 7: NVIDIA Isaac Sim."]}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.strong,{children:"Chapter 8: Perception with Isaac ROS"}),", you'll learn:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Visual SLAM for real-time mapping and localization"}),"\n",(0,t.jsx)(n.li,{children:"Object detection with DNN inference (YOLO, Faster R-CNN)"}),"\n",(0,t.jsx)(n.li,{children:"Depth estimation from stereo and monocular cameras"}),"\n",(0,t.jsx)(n.li,{children:"6DOF pose estimation for object grasping"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Domain Randomization Paper"})," (OpenAI): ",(0,t.jsx)(n.a,{href:"https://arxiv.org/abs/1703.06907",children:"https://arxiv.org/abs/1703.06907"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sim-to-Real Transfer Best Practices"}),": ",(0,t.jsx)(n.a,{href:"https://www.nvidia.com/en-us/on-demand/session/gtcspring21-s31880/",children:"https://www.nvidia.com/en-us/on-demand/session/gtcspring21-s31880/"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Isaac Sim Replicator Examples"}),": ",(0,t.jsx)(n.a,{href:"https://github.com/NVIDIA-Omniverse/IsaacSim-Samples",children:"https://github.com/NVIDIA-Omniverse/IsaacSim-Samples"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Physics Randomization for Robotics"}),": ",(0,t.jsx)(n.a,{href:"https://arxiv.org/abs/1710.06537",children:"https://arxiv.org/abs/1710.06537"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Visual Domain Randomization"}),": ",(0,t.jsx)(n.a,{href:"https://arxiv.org/abs/1906.02110",children:"https://arxiv.org/abs/1906.02110"})]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Major Milestone!",type:"success",children:(0,t.jsx)(n.p,{children:"You can now generate unlimited diverse training data for AI perception models. This is a critical skill for modern Physical AI development!"})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(6540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);