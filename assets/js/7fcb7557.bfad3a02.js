"use strict";(globalThis.webpackChunkphysical_ai_course=globalThis.webpackChunkphysical_ai_course||[]).push([[2559],{882:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/files/service_example-7061bc1b9e52243f624ef41117baba32.py"},4287:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"module-1-ros2/ch2-python-rclpy/message-types","title":"ROS 2 Message Types","description":"Introduction","source":"@site/docs/module-1-ros2/ch2-python-rclpy/message-types.md","sourceDirName":"module-1-ros2/ch2-python-rclpy","slug":"/module-1-ros2/ch2-python-rclpy/message-types","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch2-python-rclpy/message-types","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/ch2-python-rclpy/message-types.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Your First ROS 2 Node in Python","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch2-python-rclpy/first-node"},"next":{"title":"Timers and Callbacks in ROS 2","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch2-python-rclpy/timers-callbacks"}}');var r=n(4848),i=n(8453);const a={},o="ROS 2 Message Types",l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Standard Message Packages",id:"standard-message-packages",level:2},{value:"Working with std_msgs",id:"working-with-std_msgs",level:2},{value:"String Messages",id:"string-messages",level:3},{value:"Numeric Messages",id:"numeric-messages",level:3},{value:"Array Messages",id:"array-messages",level:3},{value:"Publisher Example with Different Types",id:"publisher-example-with-different-types",level:3},{value:"Working with geometry_msgs",id:"working-with-geometry_msgs",level:2},{value:"Point - 3D Position",id:"point---3d-position",level:3},{value:"Quaternion - 3D Orientation",id:"quaternion---3d-orientation",level:3},{value:"Pose - Position + Orientation",id:"pose---position--orientation",level:3},{value:"Twist - Linear and Angular Velocity",id:"twist---linear-and-angular-velocity",level:3},{value:"Transform - Position, Rotation, and Metadata",id:"transform---position-rotation-and-metadata",level:3},{value:"Working with sensor_msgs",id:"working-with-sensor_msgs",level:2},{value:"JointState - Robot Joint Information",id:"jointstate---robot-joint-information",level:3},{value:"Imu - Inertial Measurement Unit",id:"imu---inertial-measurement-unit",level:3},{value:"LaserScan - LiDAR Data",id:"laserscan---lidar-data",level:3},{value:"Understanding Headers",id:"understanding-headers",level:2},{value:"Viewing Message Definitions",id:"viewing-message-definitions",level:2},{value:"Creating Custom Messages",id:"creating-custom-messages",level:2},{value:"Step 1: Create Package Structure",id:"step-1-create-package-structure",level:3},{value:"Step 2: Define Your Message",id:"step-2-define-your-message",level:3},{value:"Step 3: Update package.xml",id:"step-3-update-packagexml",level:3},{value:"Step 4: Update CMakeLists.txt",id:"step-4-update-cmakeliststxt",level:3},{value:"Step 5: Build the Package",id:"step-5-build-the-package",level:3},{value:"Step 6: Use Your Custom Message",id:"step-6-use-your-custom-message",level:3},{value:"Message Field Types",id:"message-field-types",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Choose Appropriate Types",id:"1-choose-appropriate-types",level:3},{value:"2. Include Headers When Needed",id:"2-include-headers-when-needed",level:3},{value:"3. Use Descriptive Field Names",id:"3-use-descriptive-field-names",level:3},{value:"4. Document Custom Messages",id:"4-document-custom-messages",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Exercise 1: Robot Status Publisher",id:"exercise-1-robot-status-publisher",level:3},{value:"Exercise 2: Multi-Sensor Subscriber",id:"exercise-2-multi-sensor-subscriber",level:3},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"ros-2-message-types",children:"ROS 2 Message Types"})}),"\n",(0,r.jsx)(s.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(s.p,{children:"ROS 2 uses messages to communicate data between nodes. Understanding different message types and how to use them is crucial for building robotic systems. This lesson covers standard message types, how to work with complex messages, and when to create custom messages."}),"\n",(0,r.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(s.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Use standard ROS 2 message types (",(0,r.jsx)(s.code,{children:"std_msgs"}),", ",(0,r.jsx)(s.code,{children:"geometry_msgs"}),", ",(0,r.jsx)(s.code,{children:"sensor_msgs"}),")"]}),"\n",(0,r.jsx)(s.li,{children:"Work with complex nested message structures"}),"\n",(0,r.jsx)(s.li,{children:"Understand message field types and constraints"}),"\n",(0,r.jsx)(s.li,{children:"Create and use custom message definitions"}),"\n",(0,r.jsx)(s.li,{children:"Choose appropriate message types for different scenarios"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Understanding of ROS 2 nodes and topics"}),"\n",(0,r.jsx)(s.li,{children:'Completed "First ROS 2 Node" lesson'}),"\n",(0,r.jsx)(s.li,{children:"Basic Python knowledge"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"standard-message-packages",children:"Standard Message Packages"}),"\n",(0,r.jsx)(s.p,{children:"ROS 2 provides several standard message packages:"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Package"}),(0,r.jsx)(s.th,{children:"Purpose"}),(0,r.jsx)(s.th,{children:"Common Messages"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"std_msgs"})}),(0,r.jsx)(s.td,{children:"Basic data types"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"String"}),", ",(0,r.jsx)(s.code,{children:"Int32"}),", ",(0,r.jsx)(s.code,{children:"Float64"}),", ",(0,r.jsx)(s.code,{children:"Bool"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"geometry_msgs"})}),(0,r.jsx)(s.td,{children:"Geometric data"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"Point"}),", ",(0,r.jsx)(s.code,{children:"Pose"}),", ",(0,r.jsx)(s.code,{children:"Twist"}),", ",(0,r.jsx)(s.code,{children:"Transform"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"sensor_msgs"})}),(0,r.jsx)(s.td,{children:"Sensor data"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"Image"}),", ",(0,r.jsx)(s.code,{children:"LaserScan"}),", ",(0,r.jsx)(s.code,{children:"Imu"}),", ",(0,r.jsx)(s.code,{children:"JointState"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"nav_msgs"})}),(0,r.jsx)(s.td,{children:"Navigation"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"Odometry"}),", ",(0,r.jsx)(s.code,{children:"Path"}),", ",(0,r.jsx)(s.code,{children:"MapMetaData"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"std_srvs"})}),(0,r.jsx)(s.td,{children:"Standard services"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"Empty"}),", ",(0,r.jsx)(s.code,{children:"SetBool"}),", ",(0,r.jsx)(s.code,{children:"Trigger"})]})]})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"working-with-std_msgs",children:"Working with std_msgs"}),"\n",(0,r.jsx)(s.h3,{id:"string-messages",children:"String Messages"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'from std_msgs.msg import String\n\n# Create and populate\nmsg = String()\nmsg.data = "Hello, ROS 2!"\n\n# Access data\ntext = msg.data\n'})}),"\n",(0,r.jsx)(s.h3,{id:"numeric-messages",children:"Numeric Messages"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from std_msgs.msg import Int32, Float64, Bool\n\n# Integer\nint_msg = Int32()\nint_msg.data = 42\n\n# Float\nfloat_msg = Float64()\nfloat_msg.data = 3.14159\n\n# Boolean\nbool_msg = Bool()\nbool_msg.data = True\n"})}),"\n",(0,r.jsx)(s.h3,{id:"array-messages",children:"Array Messages"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from std_msgs.msg import Float32MultiArray, Int32MultiArray\n\n# Float array\narray_msg = Float32MultiArray()\narray_msg.data = [1.0, 2.5, 3.7, 4.2]\n\n# Int array\nint_array_msg = Int32MultiArray()\nint_array_msg.data = [10, 20, 30, 40, 50]\n"})}),"\n",(0,r.jsx)(s.h3,{id:"publisher-example-with-different-types",children:"Publisher Example with Different Types"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String, Int32, Float64\n\n\nclass MultiTypePublisher(Node):\n    def __init__(self):\n        super().__init__('multi_type_publisher')\n\n        self.string_pub = self.create_publisher(String, 'text_data', 10)\n        self.int_pub = self.create_publisher(Int32, 'count_data', 10)\n        self.float_pub = self.create_publisher(Float64, 'sensor_data', 10)\n\n        self.timer = self.create_timer(1.0, self.timer_callback)\n        self.count = 0\n\n    def timer_callback(self):\n        # Publish string\n        str_msg = String()\n        str_msg.data = f'Message {self.count}'\n        self.string_pub.publish(str_msg)\n\n        # Publish integer\n        int_msg = Int32()\n        int_msg.data = self.count\n        self.int_pub.publish(int_msg)\n\n        # Publish float\n        float_msg = Float64()\n        float_msg.data = self.count * 1.5\n        self.float_pub.publish(float_msg)\n\n        self.count += 1\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"working-with-geometry_msgs",children:"Working with geometry_msgs"}),"\n",(0,r.jsx)(s.h3,{id:"point---3d-position",children:"Point - 3D Position"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from geometry_msgs.msg import Point\n\n# Create a 3D point\npoint = Point()\npoint.x = 1.0\npoint.y = 2.0\npoint.z = 3.0\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Message Definition:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"float64 x\nfloat64 y\nfloat64 z\n"})}),"\n",(0,r.jsx)(s.h3,{id:"quaternion---3d-orientation",children:"Quaternion - 3D Orientation"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from geometry_msgs.msg import Quaternion\n\n# Create orientation (quaternion)\nquat = Quaternion()\nquat.x = 0.0\nquat.y = 0.0\nquat.z = 0.0\nquat.w = 1.0  # Identity quaternion (no rotation)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"pose---position--orientation",children:"Pose - Position + Orientation"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from geometry_msgs.msg import Pose, Point, Quaternion\n\n# Create a pose\npose = Pose()\npose.position = Point(x=1.0, y=2.0, z=0.0)\npose.orientation = Quaternion(x=0.0, y=0.0, z=0.0, w=1.0)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Message Definition:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Point position\nQuaternion orientation\n"})}),"\n",(0,r.jsx)(s.h3,{id:"twist---linear-and-angular-velocity",children:"Twist - Linear and Angular Velocity"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from geometry_msgs.msg import Twist, Vector3\n\n# Create velocity command\ncmd_vel = Twist()\n\n# Linear velocity (m/s)\ncmd_vel.linear.x = 0.5   # Forward\ncmd_vel.linear.y = 0.0   # Sideways (for holonomic robots)\ncmd_vel.linear.z = 0.0   # Up/down\n\n# Angular velocity (rad/s)\ncmd_vel.angular.x = 0.0  # Roll\ncmd_vel.angular.y = 0.0  # Pitch\ncmd_vel.angular.z = 0.3  # Yaw (turning)\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Robot Control Example:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\n\n\nclass RobotController(Node):\n    def __init__(self):\n        super().__init__('robot_controller')\n        self.publisher = self.create_publisher(Twist, 'cmd_vel', 10)\n        self.timer = self.create_timer(0.1, self.control_loop)\n\n    def control_loop(self):\n        msg = Twist()\n\n        # Move forward at 0.5 m/s\n        msg.linear.x = 0.5\n\n        # Turn at 0.3 rad/s\n        msg.angular.z = 0.3\n\n        self.publisher.publish(msg)\n        self.get_logger().info('Sent velocity command')\n\n    def stop(self):\n        # Send zero velocity to stop\n        msg = Twist()\n        msg.linear.x = 0.0\n        msg.angular.z = 0.0\n        self.publisher.publish(msg)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"transform---position-rotation-and-metadata",children:"Transform - Position, Rotation, and Metadata"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from geometry_msgs.msg import TransformStamped\nfrom geometry_msgs.msg import Transform, Quaternion, Vector3\n\n# Create a transform\ntransform = TransformStamped()\n\n# Header with timestamp and frame IDs\ntransform.header.stamp = self.get_clock().now().to_msg()\ntransform.header.frame_id = 'world'\ntransform.child_frame_id = 'robot'\n\n# Translation\ntransform.transform.translation = Vector3(x=1.0, y=0.5, z=0.0)\n\n# Rotation\ntransform.transform.rotation = Quaternion(x=0.0, y=0.0, z=0.0, w=1.0)\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"working-with-sensor_msgs",children:"Working with sensor_msgs"}),"\n",(0,r.jsx)(s.h3,{id:"jointstate---robot-joint-information",children:"JointState - Robot Joint Information"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from sensor_msgs.msg import JointState\n\n# Create joint state message\njoint_state = JointState()\n\n# Header with timestamp\njoint_state.header.stamp = self.get_clock().now().to_msg()\n\n# Joint names\njoint_state.name = ['joint1', 'joint2', 'joint3']\n\n# Joint positions (radians or meters)\njoint_state.position = [0.0, 1.57, -0.5]\n\n# Joint velocities (optional)\njoint_state.velocity = [0.1, 0.0, -0.2]\n\n# Joint efforts/torques (optional)\njoint_state.effort = [0.5, 1.2, 0.8]\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Humanoid Joint Example:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nimport math\n\n\nclass HumanoidJointPublisher(Node):\n    def __init__(self):\n        super().__init__('humanoid_joint_publisher')\n        self.publisher = self.create_publisher(JointState, 'joint_states', 10)\n        self.timer = self.create_timer(0.1, self.publish_joints)\n        self.angle = 0.0\n\n    def publish_joints(self):\n        msg = JointState()\n        msg.header.stamp = self.get_clock().now().to_msg()\n\n        # Define humanoid joints\n        msg.name = [\n            'head_pan', 'head_tilt',\n            'left_shoulder', 'left_elbow',\n            'right_shoulder', 'right_elbow',\n            'left_hip', 'left_knee',\n            'right_hip', 'right_knee'\n        ]\n\n        # Simulate movement (sinusoidal)\n        self.angle += 0.01\n        bend = math.sin(self.angle)\n\n        msg.position = [\n            0.0,           # head_pan\n            bend * 0.3,    # head_tilt\n            bend * 0.5,    # left_shoulder\n            abs(bend) * 1.0,  # left_elbow\n            -bend * 0.5,   # right_shoulder\n            abs(bend) * 1.0,  # right_elbow\n            bend * 0.3,    # left_hip\n            abs(bend) * 0.5,  # left_knee\n            -bend * 0.3,   # right_hip\n            abs(bend) * 0.5   # right_knee\n        ]\n\n        self.publisher.publish(msg)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"imu---inertial-measurement-unit",children:"Imu - Inertial Measurement Unit"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from sensor_msgs.msg import Imu\nfrom geometry_msgs.msg import Quaternion, Vector3\n\n# Create IMU message\nimu_msg = Imu()\n\n# Header\nimu_msg.header.stamp = self.get_clock().now().to_msg()\nimu_msg.header.frame_id = 'imu_link'\n\n# Orientation (quaternion)\nimu_msg.orientation = Quaternion(x=0.0, y=0.0, z=0.0, w=1.0)\n\n# Angular velocity (rad/s)\nimu_msg.angular_velocity = Vector3(x=0.01, y=-0.02, z=0.0)\n\n# Linear acceleration (m/s\xb2)\nimu_msg.linear_acceleration = Vector3(x=0.0, y=0.0, z=9.81)\n\n# Covariance matrices (optional, 9 elements each)\nimu_msg.orientation_covariance = [0.0] * 9\nimu_msg.angular_velocity_covariance = [0.0] * 9\nimu_msg.linear_acceleration_covariance = [0.0] * 9\n"})}),"\n",(0,r.jsx)(s.h3,{id:"laserscan---lidar-data",children:"LaserScan - LiDAR Data"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from sensor_msgs.msg import LaserScan\nimport math\n\n# Create laser scan\nscan = LaserScan()\n\n# Header\nscan.header.stamp = self.get_clock().now().to_msg()\nscan.header.frame_id = 'laser_frame'\n\n# Scan parameters\nscan.angle_min = -math.pi / 2  # -90 degrees\nscan.angle_max = math.pi / 2   # +90 degrees\nscan.angle_increment = math.pi / 180  # 1 degree\nscan.time_increment = 0.0\nscan.scan_time = 0.1\n\n# Range limits\nscan.range_min = 0.1  # meters\nscan.range_max = 30.0  # meters\n\n# Range data (distances)\nnum_readings = int((scan.angle_max - scan.angle_min) / scan.angle_increment)\nscan.ranges = [1.0] * num_readings  # Example: all readings at 1m\n\n# Intensity data (optional)\nscan.intensities = [100.0] * num_readings\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"understanding-headers",children:"Understanding Headers"}),"\n",(0,r.jsxs)(s.p,{children:["Many messages include a ",(0,r.jsx)(s.code,{children:"Header"})," for metadata:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from std_msgs.msg import Header\n\nheader = Header()\nheader.stamp = self.get_clock().now().to_msg()  # Timestamp\nheader.frame_id = 'base_link'  # Coordinate frame\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Why Headers Matter:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Timestamps"}),": Know when data was captured"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Frame IDs"}),": Understand coordinate systems (critical for TF transforms)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Synchronization"}),": Match data from multiple sensors"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Example with Header:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from geometry_msgs.msg import PoseStamped\n\npose_stamped = PoseStamped()\npose_stamped.header.stamp = self.get_clock().now().to_msg()\npose_stamped.header.frame_id = 'map'\npose_stamped.pose.position.x = 1.0\npose_stamped.pose.position.y = 2.0\npose_stamped.pose.position.z = 0.0\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"viewing-message-definitions",children:"Viewing Message Definitions"}),"\n",(0,r.jsx)(s.p,{children:"Use the CLI to explore message structures:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Show message definition\nros2 interface show geometry_msgs/msg/Twist\n\n# Output:\n# Vector3  linear\n#   float64 x\n#   float64 y\n#   float64 z\n# Vector3  angular\n#   float64 x\n#   float64 y\n#   float64 z\n\n# List all messages in a package\nros2 interface package geometry_msgs\n\n# Show service definition\nros2 interface show std_srvs/srv/SetBool\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"creating-custom-messages",children:"Creating Custom Messages"}),"\n",(0,r.jsx)(s.p,{children:"When standard messages don't fit your needs, create custom ones."}),"\n",(0,r.jsx)(s.h3,{id:"step-1-create-package-structure",children:"Step 1: Create Package Structure"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create my_custom_msgs --build-type ament_cmake\ncd my_custom_msgs\nmkdir msg\n"})}),"\n",(0,r.jsx)(s.h3,{id:"step-2-define-your-message",children:"Step 2: Define Your Message"}),"\n",(0,r.jsxs)(s.p,{children:["Create ",(0,r.jsx)(s.code,{children:"msg/HumanoidStatus.msg"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"# HumanoidStatus.msg - Custom message for humanoid robot status\n\n# Header for timestamp and frame\nstd_msgs/Header header\n\n# Robot identification\nstring robot_id\nstring robot_name\n\n# Battery information\nfloat32 battery_voltage\nfloat32 battery_percentage\nbool is_charging\n\n# Motion status\nbool is_walking\nbool is_balancing\ngeometry_msgs/Vector3 center_of_mass\n\n# Joint temperatures (Celsius)\nfloat32[] joint_temperatures\n\n# Error codes\nint32 error_code\nstring error_message\n"})}),"\n",(0,r.jsx)(s.h3,{id:"step-3-update-packagexml",children:"Step 3: Update package.xml"}),"\n",(0,r.jsx)(s.p,{children:"Add dependencies:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-xml",children:"<build_depend>rosidl_default_generators</build_depend>\n<exec_depend>rosidl_default_runtime</exec_depend>\n<member_of_group>rosidl_interface_packages</member_of_group>\n\n<depend>std_msgs</depend>\n<depend>geometry_msgs</depend>\n"})}),"\n",(0,r.jsx)(s.h3,{id:"step-4-update-cmakeliststxt",children:"Step 4: Update CMakeLists.txt"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-cmake",children:'find_package(rosidl_default_generators REQUIRED)\nfind_package(std_msgs REQUIRED)\nfind_package(geometry_msgs REQUIRED)\n\nrosidl_generate_interfaces(${PROJECT_NAME}\n  "msg/HumanoidStatus.msg"\n  DEPENDENCIES std_msgs geometry_msgs\n)\n'})}),"\n",(0,r.jsx)(s.h3,{id:"step-5-build-the-package",children:"Step 5: Build the Package"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_custom_msgs\nsource install/setup.bash\n"})}),"\n",(0,r.jsx)(s.h3,{id:"step-6-use-your-custom-message",children:"Step 6: Use Your Custom Message"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from my_custom_msgs.msg import HumanoidStatus\nfrom geometry_msgs.msg import Vector3\n\n# Create custom message\nstatus = HumanoidStatus()\nstatus.header.stamp = self.get_clock().now().to_msg()\nstatus.robot_id = 'HUM-001'\nstatus.robot_name = 'Atlas'\n\nstatus.battery_voltage = 24.5\nstatus.battery_percentage = 85.0\nstatus.is_charging = False\n\nstatus.is_walking = True\nstatus.is_balancing = True\nstatus.center_of_mass = Vector3(x=0.0, y=0.0, z=0.95)\n\nstatus.joint_temperatures = [35.2, 36.1, 34.8, 37.5, 35.9]\n\nstatus.error_code = 0\nstatus.error_message = 'OK'\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"message-field-types",children:"Message Field Types"}),"\n",(0,r.jsx)(s.p,{children:"Common field types in ROS 2 messages:"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Size"}),(0,r.jsx)(s.th,{children:"Range/Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"bool"})}),(0,r.jsx)(s.td,{children:"1 byte"}),(0,r.jsx)(s.td,{children:"True/False"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"int8"})}),(0,r.jsx)(s.td,{children:"1 byte"}),(0,r.jsx)(s.td,{children:"-128 to 127"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint8"})}),(0,r.jsx)(s.td,{children:"1 byte"}),(0,r.jsx)(s.td,{children:"0 to 255"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"int16"})}),(0,r.jsx)(s.td,{children:"2 bytes"}),(0,r.jsx)(s.td,{children:"-32,768 to 32,767"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint16"})}),(0,r.jsx)(s.td,{children:"2 bytes"}),(0,r.jsx)(s.td,{children:"0 to 65,535"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"int32"})}),(0,r.jsx)(s.td,{children:"4 bytes"}),(0,r.jsx)(s.td,{children:"-2\xb3\xb9 to 2\xb3\xb9-1"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint32"})}),(0,r.jsx)(s.td,{children:"4 bytes"}),(0,r.jsx)(s.td,{children:"0 to 2\xb3\xb2-1"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"int64"})}),(0,r.jsx)(s.td,{children:"8 bytes"}),(0,r.jsx)(s.td,{children:"-2\u2076\xb3 to 2\u2076\xb3-1"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint64"})}),(0,r.jsx)(s.td,{children:"8 bytes"}),(0,r.jsx)(s.td,{children:"0 to 2\u2076\u2074-1"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"float32"})}),(0,r.jsx)(s.td,{children:"4 bytes"}),(0,r.jsx)(s.td,{children:"Single precision float"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"float64"})}),(0,r.jsx)(s.td,{children:"8 bytes"}),(0,r.jsx)(s.td,{children:"Double precision float"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:"Variable"}),(0,r.jsx)(s.td,{children:"Text data (UTF-8)"})]})]})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Array Types:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Fixed size: ",(0,r.jsx)(s.code,{children:"int32[5]"})," - exactly 5 elements"]}),"\n",(0,r.jsxs)(s.li,{children:["Variable size: ",(0,r.jsx)(s.code,{children:"int32[]"})," - any number of elements"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(s.h3,{id:"1-choose-appropriate-types",children:"1. Choose Appropriate Types"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Good: Use standard messages when possible\nfrom geometry_msgs.msg import Twist  # Standard velocity\n\n# Avoid: Creating custom message for common data\n# Don't create custom velocity message\n"})}),"\n",(0,r.jsx)(s.h3,{id:"2-include-headers-when-needed",children:"2. Include Headers When Needed"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Good: Include header for timestamped/framed data\nmsg.header.stamp = self.get_clock().now().to_msg()\nmsg.header.frame_id = 'base_link'\n\n# Avoid: Missing timestamps when they matter\n"})}),"\n",(0,r.jsx)(s.h3,{id:"3-use-descriptive-field-names",children:"3. Use Descriptive Field Names"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Good\nstring robot_name\nfloat32 battery_percentage\n\n# Avoid\nstring name\nfloat32 val\n"})}),"\n",(0,r.jsx)(s.h3,{id:"4-document-custom-messages",children:"4. Document Custom Messages"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"# Temperature sensor reading\n# Units: Celsius\n# Range: -40 to 125\n\nfloat32 temperature\nbool is_valid\nstring sensor_id\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,r.jsx)(s.h3,{id:"exercise-1-robot-status-publisher",children:"Exercise 1: Robot Status Publisher"}),"\n",(0,r.jsx)(s.p,{children:"Create a node that publishes robot status using multiple message types:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float32, Bool\nfrom geometry_msgs.msg import Twist\n\n\nclass RobotStatusPublisher(Node):\n    def __init__(self):\n        super().__init__('robot_status_publisher')\n\n        # TODO: Create publishers for:\n        # 1. Battery level (Float32) on /battery\n        # 2. Is moving (Bool) on /is_moving\n        # 3. Velocity (Twist) on /cmd_vel\n\n        self.timer = self.create_timer(1.0, self.publish_status)\n\n    def publish_status(self):\n        # TODO: Publish status data\n        pass\n"})}),"\n",(0,r.jsx)(s.h3,{id:"exercise-2-multi-sensor-subscriber",children:"Exercise 2: Multi-Sensor Subscriber"}),"\n",(0,r.jsx)(s.p,{children:"Create a node that subscribes to different sensor types and logs the data:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Subscribe to:\n# - /temperature (Float32)\n# - /imu (Imu)\n# - /joint_states (JointState)\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(s.p,{children:"You've learned to:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Use standard ROS 2 message types"}),"\n",(0,r.jsx)(s.li,{children:"Work with complex geometric and sensor messages"}),"\n",(0,r.jsx)(s.li,{children:"Create custom message definitions"}),"\n",(0,r.jsx)(s.li,{children:"Choose appropriate message types"}),"\n",(0,r.jsx)(s.li,{children:"Include headers for timestamped data"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Key Takeaways:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Prefer standard messages when possible"}),"\n",(0,r.jsx)(s.li,{children:"Use headers for timestamped/framed data"}),"\n",(0,r.jsx)(s.li,{children:"Create custom messages for unique requirements"}),"\n",(0,r.jsxs)(s.li,{children:["Explore message definitions with ",(0,r.jsx)(s.code,{children:"ros2 interface show"})]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch2-python-rclpy/timers-callbacks",children:"Timers and Callbacks"})," - Advanced callback patterns"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch2-python-rclpy/parameters",children:"Parameters"})," - Configure nodes with parameters"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(882).A+"",children:"Service Example"})," - Request/response communication"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://github.com/ros2/common_interfaces",children:"ROS 2 Common Interfaces"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html",children:"Creating Custom Messages"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros2.org/latest/api/",children:"Message Type Reference"})}),"\n"]})]})}function m(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var t=n(6540);const r={},i=t.createContext(r);function a(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);