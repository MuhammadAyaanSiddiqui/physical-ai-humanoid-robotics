"use strict";(globalThis.webpackChunkphysical_ai_course=globalThis.webpackChunkphysical_ai_course||[]).push([[101],{7270:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1-ros2/ch1-fundamentals/nodes-topics","title":"Nodes and Topics","description":"Overview","source":"@site/docs/module-1-ros2/ch1-fundamentals/nodes-topics.md","sourceDirName":"module-1-ros2/ch1-fundamentals","slug":"/module-1-ros2/ch1-fundamentals/nodes-topics","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch1-fundamentals/nodes-topics","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/ch1-fundamentals/nodes-topics.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Humble Installation","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch1-fundamentals/installation"},"next":{"title":"Services and Actions","permalink":"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch1-fundamentals/services-actions"}}');var r=n(4848),l=n(8453);const a={sidebar_position:2},o="Nodes and Topics",t={},c=[{value:"Overview",id:"overview",level:2},{value:"What is a Node?",id:"what-is-a-node",level:2},{value:"Key Characteristics",id:"key-characteristics",level:3},{value:"Node Lifecycle",id:"node-lifecycle",level:3},{value:"What is a Topic?",id:"what-is-a-topic",level:2},{value:"Publisher-Subscriber Pattern",id:"publisher-subscriber-pattern",level:3},{value:"Key Characteristics",id:"key-characteristics-1",level:3},{value:"Message Types",id:"message-types",level:2},{value:"Standard Message Types",id:"standard-message-types",level:3},{value:"Sensor Message Types",id:"sensor-message-types",level:3},{value:"Geometry Message Types",id:"geometry-message-types",level:3},{value:"Creating a Simple Publisher",id:"creating-a-simple-publisher",level:2},{value:"Code Breakdown",id:"code-breakdown",level:3},{value:"Creating a Simple Subscriber",id:"creating-a-simple-subscriber",level:2},{value:"Code Breakdown",id:"code-breakdown-1",level:3},{value:"Quality of Service (QoS)",id:"quality-of-service-qos",level:2},{value:"Common QoS Profiles",id:"common-qos-profiles",level:3},{value:"When to Use Each Profile",id:"when-to-use-each-profile",level:3},{value:"Topic Names and Namespaces",id:"topic-names-and-namespaces",level:2},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Global vs Relative Names",id:"global-vs-relative-names",level:3},{value:"Using Namespaces",id:"using-namespaces",level:3},{value:"Introspection with CLI Tools",id:"introspection-with-cli-tools",level:2},{value:"List Active Topics",id:"list-active-topics",level:3},{value:"Show Topic Info",id:"show-topic-info",level:3},{value:"View Topic Data",id:"view-topic-data",level:3},{value:"Publish from Command Line",id:"publish-from-command-line",level:3},{value:"Measure Topic Frequency",id:"measure-topic-frequency",level:3},{value:"View Topic Bandwidth",id:"view-topic-bandwidth",level:3},{value:"Visualizing Node Graph",id:"visualizing-node-graph",level:2},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Exercise 1: Create a Temperature Publisher",id:"exercise-1-create-a-temperature-publisher",level:3},{value:"Exercise 2: Create a Temperature Monitor",id:"exercise-2-create-a-temperature-monitor",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"Pitfall 1: Mismatched Message Types",id:"pitfall-1-mismatched-message-types",level:3},{value:"Pitfall 2: Topic Name Typos",id:"pitfall-2-topic-name-typos",level:3},{value:"Pitfall 3: Blocking Callbacks",id:"pitfall-3-blocking-callbacks",level:3},{value:"Pitfall 4: Forgetting to Spin",id:"pitfall-4-forgetting-to-spin",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"nodes-and-topics",children:"Nodes and Topics"})}),"\n",(0,r.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(s.p,{children:"Nodes and topics are the foundation of ROS 2's communication architecture. Understanding how nodes exchange data through topics is essential for building distributed robot systems."}),"\n",(0,r.jsx)(s.h2,{id:"what-is-a-node",children:"What is a Node?"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"node"})," is an independent process that performs a specific computation or task. Examples include:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Sensor Driver"}),": Reads camera data and publishes images"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Motion Planner"}),": Calculates paths for robot navigation"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Controller"}),": Sends velocity commands to motors"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Visualizer"}),": Displays robot state in RViz"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"key-characteristics",children:"Key Characteristics"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Independent Processes"}),": Each node runs in its own process"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Single Responsibility"}),": Each node focuses on one task"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Discoverable"}),": Nodes automatically find each other on the network"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Language Agnostic"}),": Nodes can be written in C++, Python, or other supported languages"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"node-lifecycle",children:"Node Lifecycle"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Unconfigured\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 configure()\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Inactive   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502 activate()\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Active    \u2502\u25c4\u2500\u2500\u2510\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n       \u2502 cleanup()\u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  Finalized  \u251c\u2500\u2500\u2500\u2518\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(s.h2,{id:"what-is-a-topic",children:"What is a Topic?"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"topic"})," is a named channel for message communication. Nodes publish messages to topics and subscribe to topics to receive messages."]}),"\n",(0,r.jsx)(s.h3,{id:"publisher-subscriber-pattern",children:"Publisher-Subscriber Pattern"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      /camera/image      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Camera     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502  Detector    \u2502\n\u2502   Driver     \u2502                          \u2502   Node       \u2502\n\u2502  (Publisher) \u2502                          \u2502 (Subscriber) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(s.h3,{id:"key-characteristics-1",children:"Key Characteristics"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Anonymous"}),": Publishers don't know who subscribes"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Many-to-Many"}),": Multiple publishers and subscribers on one topic"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Typed"}),": Each topic has a specific message type"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Buffered"}),": Messages are queued if subscribers are slow"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"message-types",children:"Message Types"}),"\n",(0,r.jsxs)(s.p,{children:["ROS 2 uses ",(0,r.jsx)(s.strong,{children:"strongly typed messages"})," defined in ",(0,r.jsx)(s.code,{children:".msg"})," files."]}),"\n",(0,r.jsx)(s.h3,{id:"standard-message-types",children:"Standard Message Types"}),"\n",(0,r.jsxs)(s.p,{children:["Common message types from ",(0,r.jsx)(s.code,{children:"std_msgs"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"std_msgs/String         # Text data\nstd_msgs/Int32          # Integer\nstd_msgs/Float64        # Floating point\nstd_msgs/Bool           # Boolean\nstd_msgs/Header         # Timestamp and frame info\n"})}),"\n",(0,r.jsx)(s.h3,{id:"sensor-message-types",children:"Sensor Message Types"}),"\n",(0,r.jsxs)(s.p,{children:["From ",(0,r.jsx)(s.code,{children:"sensor_msgs"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"sensor_msgs/Image       # Camera images\nsensor_msgs/LaserScan   # LiDAR data\nsensor_msgs/Imu         # Inertial measurement unit\nsensor_msgs/JointState  # Robot joint positions\n"})}),"\n",(0,r.jsx)(s.h3,{id:"geometry-message-types",children:"Geometry Message Types"}),"\n",(0,r.jsxs)(s.p,{children:["From ",(0,r.jsx)(s.code,{children:"geometry_msgs"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"geometry_msgs/Twist         # Linear and angular velocity\ngeometry_msgs/Pose          # Position and orientation\ngeometry_msgs/PoseStamped   # Pose with timestamp\ngeometry_msgs/Transform     # Coordinate transformation\n"})}),"\n",(0,r.jsx)(s.h2,{id:"creating-a-simple-publisher",children:"Creating a Simple Publisher"}),"\n",(0,r.jsx)(s.p,{children:"Here's a minimal publisher node in Python:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello World: {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(s.h3,{id:"code-breakdown",children:"Code Breakdown"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Import Libraries"}),": ",(0,r.jsx)(s.code,{children:"rclpy"})," (ROS 2 Python client) and ",(0,r.jsx)(s.code,{children:"Node"})," base class"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Create Node Class"}),": Inherit from ",(0,r.jsx)(s.code,{children:"Node"})," and name it"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Create Publisher"}),": ",(0,r.jsx)(s.code,{children:"create_publisher(MessageType, 'topic_name', queue_size)"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Create Timer"}),": Calls ",(0,r.jsx)(s.code,{children:"timer_callback()"})," every 0.5 seconds"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Publish Message"}),": Create message, populate data, and publish"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Spin"}),": Keep node running and processing callbacks"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"creating-a-simple-subscriber",children:"Creating a Simple Subscriber"}),"\n",(0,r.jsx)(s.p,{children:"Here's a minimal subscriber node in Python:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(s.h3,{id:"code-breakdown-1",children:"Code Breakdown"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Create Subscriber"}),": ",(0,r.jsx)(s.code,{children:"create_subscription(MessageType, 'topic_name', callback, queue_size)"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Define Callback"}),": Function called when a message is received"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Process Message"}),": Access message data via ",(0,r.jsx)(s.code,{children:"msg.data"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"quality-of-service-qos",children:"Quality of Service (QoS)"}),"\n",(0,r.jsx)(s.p,{children:"QoS policies control how messages are delivered. ROS 2 provides flexible QoS settings for different use cases."}),"\n",(0,r.jsx)(s.h3,{id:"common-qos-profiles",children:"Common QoS Profiles"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy\n\n# Reliable delivery (TCP-like)\nreliable_qos = QoSProfile(\n    reliability=ReliabilityPolicy.RELIABLE,\n    history=HistoryPolicy.KEEP_LAST,\n    depth=10\n)\n\n# Best effort (UDP-like, faster)\nsensor_qos = QoSProfile(\n    reliability=ReliabilityPolicy.BEST_EFFORT,\n    history=HistoryPolicy.KEEP_LAST,\n    depth=10\n)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"when-to-use-each-profile",children:"When to Use Each Profile"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Profile"}),(0,r.jsx)(s.th,{children:"Use Case"}),(0,r.jsx)(s.th,{children:"Example"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Reliable"})}),(0,r.jsx)(s.td,{children:"Critical commands"}),(0,r.jsx)(s.td,{children:"Motor control, navigation goals"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Best Effort"})}),(0,r.jsx)(s.td,{children:"High-frequency sensor data"}),(0,r.jsx)(s.td,{children:"Camera images, LiDAR scans"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Transient Local"})}),(0,r.jsx)(s.td,{children:"Late joiners need history"}),(0,r.jsx)(s.td,{children:"Map data, configuration"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Volatile"})}),(0,r.jsx)(s.td,{children:"Only current data matters"}),(0,r.jsx)(s.td,{children:"Velocity commands"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"topic-names-and-namespaces",children:"Topic Names and Namespaces"}),"\n",(0,r.jsx)(s.h3,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Lowercase with underscores"}),": ",(0,r.jsx)(s.code,{children:"camera_image"}),", ",(0,r.jsx)(s.code,{children:"joint_states"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Hierarchical structure"}),": ",(0,r.jsx)(s.code,{children:"/robot1/camera/image"}),", ",(0,r.jsx)(s.code,{children:"/robot1/lidar/scan"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Descriptive names"}),": Use meaningful names that describe the data"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"global-vs-relative-names",children:"Global vs Relative Names"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Global name (starts with /)\n/camera/image\n\n# Relative name (resolved within node namespace)\ncamera/image\n\n# Private name (prefixed with node name)\n~/my_parameter\n"})}),"\n",(0,r.jsx)(s.h3,{id:"using-namespaces",children:"Using Namespaces"}),"\n",(0,r.jsx)(s.p,{children:"Launch nodes in namespaces to avoid conflicts:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Without namespace\nros2 run my_package my_node\n\n# With namespace\nros2 run my_package my_node --ros-args -r __ns:=/robot1\n"})}),"\n",(0,r.jsx)(s.h2,{id:"introspection-with-cli-tools",children:"Introspection with CLI Tools"}),"\n",(0,r.jsx)(s.h3,{id:"list-active-topics",children:"List Active Topics"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"/parameter_events\n/rosout\n/topic\n"})}),"\n",(0,r.jsx)(s.h3,{id:"show-topic-info",children:"Show Topic Info"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic info /topic\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Type: std_msgs/msg/String\nPublisher count: 1\nSubscriber count: 1\n"})}),"\n",(0,r.jsx)(s.h3,{id:"view-topic-data",children:"View Topic Data"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Print messages to terminal\nros2 topic echo /topic\n\n# Print messages once\nros2 topic echo --once /topic\n"})}),"\n",(0,r.jsx)(s.h3,{id:"publish-from-command-line",children:"Publish from Command Line"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Publish a single message\nros2 topic pub /topic std_msgs/msg/String \"data: 'Hello ROS 2'\"\n\n# Publish at 10 Hz\nros2 topic pub --rate 10 /topic std_msgs/msg/String \"data: 'Hello ROS 2'\"\n"})}),"\n",(0,r.jsx)(s.h3,{id:"measure-topic-frequency",children:"Measure Topic Frequency"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic hz /topic\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"average rate: 2.000\n  min: 0.500s max: 0.500s std dev: 0.00001s window: 10\n"})}),"\n",(0,r.jsx)(s.h3,{id:"view-topic-bandwidth",children:"View Topic Bandwidth"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic bw /camera/image\n"})}),"\n",(0,r.jsx)(s.p,{children:"Output:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Subscribed to [/camera/image]\naverage: 20.5MB/s\n  mean: 2.05MB/s min: 2.00MB/s max: 2.10MB/s window: 10\n"})}),"\n",(0,r.jsx)(s.h2,{id:"visualizing-node-graph",children:"Visualizing Node Graph"}),"\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"rqt_graph"})," to visualize nodes and topics:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 run rqt_graph rqt_graph\n"})}),"\n",(0,r.jsx)(s.p,{children:"This opens a GUI showing:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Nodes"})," (ovals)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Topics"})," (rectangles)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Connections"})," (arrows from publishers to subscribers)"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,r.jsx)(s.h3,{id:"exercise-1-create-a-temperature-publisher",children:"Exercise 1: Create a Temperature Publisher"}),"\n",(0,r.jsx)(s.p,{children:"Create a node that publishes simulated temperature readings every second."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Requirements:"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Node name: ",(0,r.jsx)(s.code,{children:"temperature_sensor"})]}),"\n",(0,r.jsxs)(s.li,{children:["Topic: ",(0,r.jsx)(s.code,{children:"/sensors/temperature"})]}),"\n",(0,r.jsxs)(s.li,{children:["Message type: ",(0,r.jsx)(s.code,{children:"std_msgs/Float64"})]}),"\n",(0,r.jsx)(s.li,{children:"Publish range: 20.0 to 30.0 degrees Celsius"}),"\n"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Solution"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\nimport random\n\nclass TemperatureSensor(Node):\n    def __init__(self):\n        super().__init__('temperature_sensor')\n        self.publisher_ = self.create_publisher(Float64, '/sensors/temperature', 10)\n        self.timer = self.create_timer(1.0, self.timer_callback)\n\n    def timer_callback(self):\n        msg = Float64()\n        msg.data = random.uniform(20.0, 30.0)\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Temperature: {msg.data:.2f}\xb0C')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    sensor = TemperatureSensor()\n    rclpy.spin(sensor)\n    sensor.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),(0,r.jsx)(s.p,{children:"Run with:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"python3 temperature_sensor.py\n"})}),(0,r.jsx)(s.p,{children:"Monitor with:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /sensors/temperature\nros2 topic hz /sensors/temperature\n"})})]}),"\n",(0,r.jsx)(s.h3,{id:"exercise-2-create-a-temperature-monitor",children:"Exercise 2: Create a Temperature Monitor"}),"\n",(0,r.jsx)(s.p,{children:"Create a subscriber node that monitors temperature and warns if it exceeds 28\xb0C."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Requirements:"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Node name: ",(0,r.jsx)(s.code,{children:"temperature_monitor"})]}),"\n",(0,r.jsxs)(s.li,{children:["Subscribe to: ",(0,r.jsx)(s.code,{children:"/sensors/temperature"})]}),"\n",(0,r.jsx)(s.li,{children:"Log warning if temperature > 28.0"}),"\n"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Solution"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\n\nclass TemperatureMonitor(Node):\n    def __init__(self):\n        super().__init__('temperature_monitor')\n        self.subscription = self.create_subscription(\n            Float64,\n            '/sensors/temperature',\n            self.temperature_callback,\n            10)\n\n    def temperature_callback(self, msg):\n        temp = msg.data\n        if temp > 28.0:\n            self.get_logger().warn(f'High temperature: {temp:.2f}\xb0C')\n        else:\n            self.get_logger().info(f'Temperature OK: {temp:.2f}\xb0C')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    monitor = TemperatureMonitor()\n    rclpy.spin(monitor)\n    monitor.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),(0,r.jsx)(s.p,{children:"Run both nodes in separate terminals:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Terminal 1\npython3 temperature_sensor.py\n\n# Terminal 2\npython3 temperature_monitor.py\n"})})]}),"\n",(0,r.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Use Descriptive Names"}),": Topic names should clearly describe the data"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Keep Messages Small"}),": Large messages increase latency"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Choose Appropriate QoS"}),": Match QoS to your use case"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Log Meaningfully"}),": Use ",(0,r.jsx)(s.code,{children:"get_logger()"})," for debugging"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Handle Shutdown Gracefully"}),": Always call ",(0,r.jsx)(s.code,{children:"destroy_node()"})," and ",(0,r.jsx)(s.code,{children:"shutdown()"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"One Node, One Purpose"}),": Keep nodes focused on a single task"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Namespace Your Topics"}),": Use hierarchical names to organize topics"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,r.jsx)(s.h3,{id:"pitfall-1-mismatched-message-types",children:"Pitfall 1: Mismatched Message Types"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Problem"}),": Subscriber expects ",(0,r.jsx)(s.code,{children:"std_msgs/String"}),", publisher sends ",(0,r.jsx)(s.code,{children:"std_msgs/Int32"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),": Ensure publisher and subscriber use the same message type"]}),"\n",(0,r.jsx)(s.h3,{id:"pitfall-2-topic-name-typos",children:"Pitfall 2: Topic Name Typos"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Problem"}),": Publisher sends to ",(0,r.jsx)(s.code,{children:"/camera/imag"}),", subscriber listens to ",(0,r.jsx)(s.code,{children:"/camera/image"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),": Use constants or configuration files for topic names"]}),"\n",(0,r.jsx)(s.h3,{id:"pitfall-3-blocking-callbacks",children:"Pitfall 3: Blocking Callbacks"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Problem"}),": Subscriber callback takes too long, messages are dropped"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),": Keep callbacks fast, offload heavy processing to separate threads"]}),"\n",(0,r.jsx)(s.h3,{id:"pitfall-4-forgetting-to-spin",children:"Pitfall 4: Forgetting to Spin"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Problem"}),": Node doesn't receive callbacks because ",(0,r.jsx)(s.code,{children:"spin()"})," wasn't called"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),": Always call ",(0,r.jsx)(s.code,{children:"rclpy.spin(node)"})," in your main function"]}),"\n",(0,r.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(s.p,{children:"Now that you understand nodes and topics:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Learn about ",(0,r.jsx)(s.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch1-fundamentals/services-actions",children:"Services and Actions"})," for request-response patterns"]}),"\n",(0,r.jsxs)(s.li,{children:["Explore ",(0,r.jsx)(s.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch1-fundamentals/cli-tools",children:"CLI Tools"})," for debugging and introspection"]}),"\n",(0,r.jsxs)(s.li,{children:["Build your ",(0,r.jsx)(s.a,{href:"/physical-ai-humanoid-robotics/docs/module-1-ros2/ch2-python-rclpy/first-node",children:"First Python Node"})," from scratch"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/Basic/About-Nodes.html",children:"ROS 2 Concepts: Nodes"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/Basic/About-Topics.html",children:"ROS 2 Concepts: Topics"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/Intermediate/About-Quality-of-Service-Settings.html",children:"ROS 2 QoS"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html",children:"Understanding ROS 2 Topics"})}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Prerequisites"}),": ROS 2 Humble installed\n",(0,r.jsx)(s.strong,{children:"Estimated Time"}),": 45-60 minutes\n",(0,r.jsx)(s.strong,{children:"Learning Outcomes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Understand nodes as independent processes"}),"\n",(0,r.jsx)(s.li,{children:"Create publishers and subscribers in Python"}),"\n",(0,r.jsx)(s.li,{children:"Configure Quality of Service policies"}),"\n",(0,r.jsx)(s.li,{children:"Use CLI tools to inspect topics"}),"\n",(0,r.jsx)(s.li,{children:"Visualize node graphs with rqt_graph"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var i=n(6540);const r={},l=i.createContext(r);function a(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);